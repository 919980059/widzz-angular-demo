(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"2FIM":function(t,e,s){"use strict";s.r(e),s.d(e,"EditStrategyModule",(function(){return Qe}));var n=s("8STC"),i=s("VphZ"),c=s("g1Xn"),a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),o=new Uint8Array(16);function r(){if(!a)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(o)}for(var l=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,d=function(t){return"string"==typeof t&&l.test(t)},g=[],h=0;h<256;++h)g.push((h+256).toString(16).substr(1));var u=function(t,e,s){var n=(t=t||{}).random||(t.rng||r)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){s=s||0;for(var i=0;i<16;++i)e[s+i]=n[i];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=(g[t[e+0]]+g[t[e+1]]+g[t[e+2]]+g[t[e+3]]+"-"+g[t[e+4]]+g[t[e+5]]+"-"+g[t[e+6]]+g[t[e+7]]+"-"+g[t[e+8]]+g[t[e+9]]+"-"+g[t[e+10]]+g[t[e+11]]+g[t[e+12]]+g[t[e+13]]+g[t[e+14]]+g[t[e+15]]).toLowerCase();if(!d(s))throw TypeError("Stringified UUID is invalid");return s}(n)},p=s("3Pt+"),m=s("XNiG");const{parse:b,stringify:A}=JSON,{keys:y}=Object,f=String,w=(t,e)=>e,v=t=>t instanceof f?f(t):t,E=(t,e)=>"string"==typeof e?new f(e):e,G=(t,e,s,n)=>y(s).reduce((s,i)=>{const c=s[i];if(c instanceof f){const a=t[c];"object"!=typeof a||e.has(a)?s[i]=n.call(s,i,a):(e.add(a),s[i]=n.call(s,i,G(t,e,a,n)))}else s[i]=n.call(s,i,c);return s},s),T=(t,e,s)=>{const n=f(e.push(s)-1);return t.set(s,n),n},S=(t,e)=>{const s=b(t,E).map(v),n=s[0],i=e||w,c="object"==typeof n&&n?G(s,new Set,n,i):n;return i.call({"":c},"",c)},M=(t,e,s)=>{const n=e&&"object"==typeof e?(t,s)=>""===t||-1<e.indexOf(t)?s:void 0:e||w,i=new Map,c=[],a=[];let o=+T(i,c,n.call({"":t},"",t)),r=!o;for(;o<c.length;)r=!0,a[o]=A(c[o++],l,s);return"["+a.join(",")+"]";function l(t,e){if(r)return r=!r,e;const s=n.call(this,t,e);switch(typeof s){case"object":if(null===s)return s;case"string":return i.get(s)||T(i,c,s)}return s}};var k=s("4yoF"),x=s("fXoL"),I=s("O1s9"),N=s("0IaG"),Y=s("tk/3"),C=s("Y8gI"),L=s("tyNb"),U=s("sYmb"),R=s("dNgK"),Z=s("BMBm"),D=s("YMqD");let F=(()=>{class t{constructor(t,e){this.http=t,this.utils=e}multiSearchMemberLists(t,e,s,n){const i=this.utils.getMultiSearch(t,e,s,n);return this.http.get(sessionStorage.getItem("baseUrl")+Z.a.passengersTag+i,{observe:"response"})}getDetailById(t){return this.http.get(sessionStorage.getItem("baseUrl")+Z.a.passengersTag+"/"+t)}}return t.\u0275fac=function(e){return new(e||t)(x.cc(Y.c),x.cc(D.a))},t.\u0275prov=x.Ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),X=(()=>{class t{constructor(t,e){this.http=t,this.utils=e}getCouponById(t){return this.http.get(sessionStorage.getItem("baseUrl")+t)}}return t.\u0275fac=function(e){return new(e||t)(x.cc(Y.c),x.cc(D.a))},t.\u0275prov=x.Ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var J=s("+IAj"),j=s("XiUz"),Q=s("ofXK"),B=s("bTqV"),V=s("FKr1"),P=s("Qu3c"),O=s("NFeN"),W=s("f0Cb"),z=s("znSr"),H=s("kmnG"),K=s("qFsG"),q=s("3BxJ"),_=s("zwY0"),$=s.n(_),tt=s("Ombb"),et=s("QM5T"),st=s("4bjS"),nt=s("XQXX");const it=["input"];function ct(t,e){if(1&t&&(x.Yb(0,"mat-label"),x.Uc(1),x.Xb()),2&t){const t=x.kc();x.Gb(1),x.Vc(t.label)}}function at(t,e){1&t&&x.Tb(0,"span",5)}function ot(t,e){if(1&t&&(x.Yb(0,"mat-error"),x.Uc(1),x.Xb()),2&t){const t=x.kc();x.Gb(1),x.Vc(t.requiredMsg)}}const rt=new x.t("default_lang");let lt=(()=>{class t{constructor(t){this.defaultLang=t,this.readonly=!0,this.showCalendar=!0,this.floatLabel="auto",this.config={enableTime:!0,time_24hr:!0,enableSeconds:!0},this.timeControl=new p.e,this.sourceDate=new x.o,this.inputValue=new x.o}setDateLocale(t){switch(t){case"zh-CN":this.config.locale=q.Mandarin;break;case"zh-TW":this.config.locale=tt.MandarinTraditional;break;default:this.config.locale=et.english}this.picker&&this.picker.destroy(),this.picker=$()(this.input.nativeElement,this.config)}onDateChange(t){this.sourceDate.emit(this.picker.selectedDates[0]),setTimeout(()=>{this.inputValue.emit(t.target.value)},500)}ngOnInit(){this.setDateLocale(this.defaultLang),this.timeControl.valueChanges.subscribe(t=>{if("Invalid Date"!==new Date(t).toString()&&this.picker.setDate(new Date(t),!1),null===t&&this.picker.setDate(null,!1),this.isTime(t)){const e=t.split(":"),s=Object(st.a)(Object(nt.a)(new Date,Number(e[0])),Number(e[1]));this.picker.setDate(s,!1)}})}isTime(t){return/^[0-9a-zA-Z]{1,2}[:][0-9]{1,2}$/.test(t)}ngOnDestroy(){this.picker.destroy()}}return t.\u0275fac=function(e){return new(e||t)(x.Sb(rt,8))},t.\u0275cmp=x.Mb({type:t,selectors:[["lib-ng-material-flatpickr"]],viewQuery:function(t,e){var s;1&t&&x.Oc(it,!0),2&t&&x.Ec(s=x.hc())&&(e.input=s.first)},inputs:{readonly:"readonly",showCalendar:"showCalendar",floatLabel:"floatLabel",config:"config",timeControl:"timeControl",label:"label",requiredMsg:"requiredMsg"},outputs:{sourceDate:"sourceDate",inputValue:"inputValue"},decls:6,vars:6,consts:[["appearance","outline",3,"floatLabel"],[4,"ngIf"],["autocomplete","off","matInput","",3,"readonly","formControl","change"],["input",""],["class","iconfont iconcalendar","matSuffix","",4,"ngIf"],["matSuffix","",1,"iconfont","iconcalendar"]],template:function(t,e){1&t&&(x.Yb(0,"mat-form-field",0),x.Sc(1,ct,2,1,"mat-label",1),x.Yb(2,"input",2,3),x.gc("change",(function(t){return e.onDateChange(t)})),x.Xb(),x.Sc(4,at,1,0,"span",4),x.Sc(5,ot,2,1,"mat-error",1),x.Xb()),2&t&&(x.sc("floatLabel",e.floatLabel),x.Gb(1),x.sc("ngIf",e.label),x.Gb(1),x.sc("readonly",e.readonly)("formControl",e.timeControl),x.Gb(2),x.sc("ngIf",e.showCalendar),x.Gb(1),x.sc("ngIf",e.timeControl.invalid&&e.timeControl.hasError("required")))},directives:[H.c,Q.n,K.b,p.c,p.o,p.f,H.f,H.h,H.b],encapsulation:2}),t})(),dt=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[{provide:rt,useValue:e}]}}}return t.\u0275mod=x.Qb({type:t}),t.\u0275inj=x.Pb({factory:function(e){return new(e||t)},imports:[[H.e,K.c,Q.c,p.s]]}),t})();var gt=s("1jcm"),ht=s("ihCf"),ut=s("A5z7"),pt=s("CPJB"),mt=s("8vh+"),bt=s("Bone"),At=s("zkxU"),yt=s("CSEJ");const ft=["clearCanvas"],wt=["canLeave"],vt=["textInput"],Et=["startTime"],Gt=["endTime"];function Tt(t,e){1&t&&(x.Yb(0,"h2",61),x.Uc(1),x.lc(2,"translate"),x.Xb()),2&t&&(x.Gb(1),x.Vc(x.mc(2,1,"nav.marketingStrategy.edit")))}function St(t,e){1&t&&(x.Yb(0,"h2",61),x.Uc(1),x.lc(2,"translate"),x.Xb()),2&t&&(x.Gb(1),x.Vc(x.mc(2,1,"nav.marketingStrategy.create")))}function Mt(t,e){if(1&t&&(x.jc(),x.Yb(0,"tspan",71),x.Uc(1),x.lc(2,"translate"),x.Xb()),2&t){const t=x.kc().$implicit;x.Gb(1),x.Wc(" ",x.mc(2,1,t.name)," ")}}function kt(t,e){if(1&t&&(x.jc(),x.Yb(0,"tspan",72),x.Uc(1),x.lc(2,"translate"),x.Xb()),2&t){const t=x.kc().$implicit;x.Gb(1),x.Wc(" ",x.mc(2,1,t.name)," ")}}function xt(t,e){if(1&t){const t=x.Zb();x.Yb(0,"div",62),x.gc("touchmove",(function(e){return x.Jc(t),x.kc().onTouchMove(e)}))("touchend",(function(e){return x.Jc(t),x.kc().onTouchEnd(e)}))("touchstart",(function(e){return x.Jc(t),x.kc().onTouchStart(e)}))("dragstart",(function(e){return x.Jc(t),x.kc().onDragStart(e)})),x.lc(1,"translate"),x.jc(),x.Yb(2,"svg",63),x.Tb(3,"rect",64),x.Tb(4,"circle",65),x.Tb(5,"circle",66),x.Yb(6,"text",67),x.Yb(7,"tspan",68),x.Uc(8),x.Xb(),x.Yb(9,"tspan",68),x.Uc(10),x.Xb(),x.Sc(11,Mt,3,3,"tspan",69),x.lc(12,"translate"),x.Sc(13,kt,3,3,"tspan",70),x.lc(14,"translate"),x.Xb(),x.Xb(),x.Xb()}if(2&t){const t=e.$implicit;x.sc("id",t.type)("title",x.mc(1,6,t.belongType)),x.Gb(8),x.Vc(t.type),x.Gb(2),x.Vc(t.name),x.Gb(1),x.sc("ngIf",x.mc(12,8,t.name).length<=5),x.Gb(2),x.sc("ngIf",x.mc(14,10,t.name).length>5)}}function It(t,e){if(1&t&&(x.jc(),x.Yb(0,"tspan",71),x.Uc(1),x.lc(2,"translate"),x.Xb()),2&t){const t=x.kc().$implicit;x.Gb(1),x.Wc(" ",x.mc(2,1,t.name)," ")}}function Nt(t,e){if(1&t&&(x.jc(),x.Yb(0,"tspan",72),x.Uc(1),x.lc(2,"translate"),x.Xb()),2&t){const t=x.kc().$implicit;x.Gb(1),x.Wc(" ",x.mc(2,1,t.name)," ")}}function Yt(t,e){if(1&t){const t=x.Zb();x.Yb(0,"div",73),x.gc("touchmove",(function(e){return x.Jc(t),x.kc().onTouchMove(e)}))("touchend",(function(e){return x.Jc(t),x.kc().onTouchEnd(e)}))("touchstart",(function(e){return x.Jc(t),x.kc().onTouchStart(e)}))("dragstart",(function(e){return x.Jc(t),x.kc().onDragStart(e)})),x.lc(1,"translate"),x.jc(),x.Yb(2,"svg",63),x.Tb(3,"rect",74),x.Tb(4,"circle",65),x.Tb(5,"circle",75),x.Yb(6,"text",67),x.Yb(7,"tspan",68),x.Uc(8),x.Xb(),x.Yb(9,"tspan",68),x.Uc(10),x.Xb(),x.Sc(11,It,3,3,"tspan",69),x.lc(12,"translate"),x.Sc(13,Nt,3,3,"tspan",70),x.lc(14,"translate"),x.Xb(),x.Xb(),x.Xb()}if(2&t){const t=e.$implicit;x.sc("id",t.type)("title",x.mc(1,6,t.belongType)),x.Gb(8),x.Vc(t.type),x.Gb(2),x.Vc(t.name),x.Gb(1),x.sc("ngIf",x.mc(12,8,t.name).length<=5),x.Gb(2),x.sc("ngIf",x.mc(14,10,t.name).length>5)}}function Ct(t,e){if(1&t&&(x.jc(),x.Yb(0,"tspan",71),x.Uc(1),x.lc(2,"translate"),x.Xb()),2&t){const t=x.kc().$implicit;x.Gb(1),x.Wc(" ",x.mc(2,1,t.name)," ")}}function Lt(t,e){if(1&t&&(x.jc(),x.Yb(0,"tspan",72),x.Uc(1),x.lc(2,"translate"),x.Xb()),2&t){const t=x.kc().$implicit;x.Gb(1),x.Wc(" ",x.mc(2,1,t.name)," ")}}function Ut(t,e){if(1&t){const t=x.Zb();x.Yb(0,"div",76),x.gc("touchmove",(function(e){return x.Jc(t),x.kc().onTouchMove(e)}))("touchend",(function(e){return x.Jc(t),x.kc().onTouchEnd(e)}))("touchstart",(function(e){return x.Jc(t),x.kc().onTouchStart(e)}))("dragstart",(function(e){return x.Jc(t),x.kc().onDragStart(e)})),x.lc(1,"translate"),x.jc(),x.Yb(2,"svg",63),x.Tb(3,"rect",77),x.Tb(4,"circle",65),x.Tb(5,"circle",75),x.Yb(6,"text",67),x.Yb(7,"tspan",68),x.Uc(8),x.Xb(),x.Yb(9,"tspan",68),x.Uc(10),x.Xb(),x.Sc(11,Ct,3,3,"tspan",69),x.lc(12,"translate"),x.Sc(13,Lt,3,3,"tspan",70),x.lc(14,"translate"),x.Xb(),x.Xb(),x.Xb()}if(2&t){const t=e.$implicit;x.sc("id",t.type)("title",x.mc(1,6,t.belongType)),x.Gb(8),x.Vc(t.type),x.Gb(2),x.Vc(t.name),x.Gb(1),x.sc("ngIf",x.mc(12,8,t.name).length<=5),x.Gb(2),x.sc("ngIf",x.mc(14,10,t.name).length>5)}}function Rt(t,e){if(1&t){const t=x.Zb();x.Wb(0),x.Yb(1,"button",22),x.gc("click",(function(){return x.Jc(t),x.kc().saveSvg()})),x.lc(2,"translate"),x.Yb(3,"mat-icon"),x.Uc(4,"photo"),x.Xb(),x.Xb(),x.Yb(5,"button",22),x.gc("click",(function(){return x.Jc(t),x.kc().saveJson()})),x.lc(6,"translate"),x.Yb(7,"mat-icon"),x.Uc(8,"cloud_download"),x.Xb(),x.Xb(),x.Vb()}2&t&&(x.Gb(1),x.sc("matTooltip",x.mc(2,2,"strategy.saveSvg")),x.Gb(4),x.sc("matTooltip",x.mc(6,4,"strategy.saveJson")))}function Zt(t,e){if(1&t&&(x.Yb(0,"span",78),x.Uc(1),x.Xb()),2&t){const t=x.kc();x.Gb(1),x.Xc(" ",t.targetNode.title?"\u201c"+t.targetNode.title+"\u201d":"","",t.errorMsg," ")}}function Dt(t,e){1&t&&(x.Yb(0,"mat-icon"),x.Uc(1,"fullscreen"),x.Xb())}function Ft(t,e){1&t&&(x.Yb(0,"mat-icon"),x.Uc(1,"fullscreen_exit"),x.Xb())}function Xt(t,e){if(1&t){const t=x.Zb();x.Yb(0,"button",22),x.gc("click",(function(){return x.Jc(t),x.kc().reloadStrategy()})),x.lc(1,"translate"),x.Yb(2,"mat-icon"),x.Uc(3,"autorenew"),x.Xb(),x.Xb()}2&t&&x.sc("matTooltip",x.mc(1,1,"strategy.reload"))}function Jt(t,e){if(1&t){const t=x.Zb();x.Wb(0),x.Yb(1,"button",22),x.gc("click",(function(){return x.Jc(t),x.kc().clearAll()})),x.lc(2,"translate"),x.Yb(3,"mat-icon"),x.Uc(4,"refresh"),x.Xb(),x.Xb(),x.Vb()}2&t&&(x.Gb(1),x.sc("matTooltip",x.mc(2,1,"strategy.clear")))}function jt(t,e){1&t&&(x.Yb(0,"mat-error"),x.Uc(1),x.lc(2,"translate"),x.lc(3,"translate"),x.Xb()),2&t&&(x.Gb(1),x.Xc(" ",x.mc(2,2,"strategy.name"),"",x.mc(3,4,"form.required")," "))}function Qt(t,e){if(1&t){const t=x.Zb();x.Wb(0),x.Yb(1,"div",89),x.gc("click",(function(){x.Jc(t);const s=e.$implicit;return x.kc(3).appendNode(s)})),x.lc(2,"translate"),x.jc(),x.Yb(3,"svg",90),x.Tb(4,"circle",91),x.Xb(),x.Xb(),x.Vb()}if(2&t){const t=e.$implicit;x.Gb(1),x.sc("id","line-"+t.type)("matTooltip",x.mc(2,2,t.name))}}function Bt(t,e){if(1&t&&(x.Yb(0,"div",82),x.Sc(1,Qt,5,4,"ng-container",88),x.Xb()),2&t){const t=x.kc(2);x.Gb(1),x.sc("ngForOf",t.editControls)}}function Vt(t,e){1&t&&x.Tb(0,"mat-divider",16)}function Pt(t,e){if(1&t){const t=x.Zb();x.Yb(0,"div",86),x.gc("click",(function(){return x.Jc(t),x.kc(2).showChangeTypes()})),x.lc(1,"translate"),x.Yb(2,"mat-icon",87),x.Uc(3,"build"),x.Xb(),x.Xb()}2&t&&x.sc("matTooltip",x.mc(1,1,"strategy.changeType"))}function Ot(t,e){if(1&t){const t=x.Zb();x.Yb(0,"div",92),x.gc("click",(function(){return x.Jc(t),x.kc(2).lineNode()})),x.lc(1,"translate"),x.Yb(2,"mat-icon",87),x.Uc(3,"arrow_right_alt"),x.Xb(),x.Xb()}2&t&&x.sc("matTooltip",x.mc(1,1,"strategy.lineNode"))}function Wt(t,e){if(1&t){const t=x.Zb();x.Yb(0,"div",93),x.gc("click",(function(){return x.Jc(t),x.kc(2).showEdit()})),x.lc(1,"translate"),x.Yb(2,"mat-icon",87),x.Uc(3,"edit"),x.Xb(),x.Xb()}2&t&&x.sc("matTooltip",x.mc(1,1,"strategy.edit"))}const zt=function(t,e){return{left:t,top:e}};function Ht(t,e){if(1&t){const t=x.Zb();x.Yb(0,"div",79),x.gc("mousewheel",(function(e){return x.Jc(t),x.kc().onWheel(e)})),x.Sc(1,Bt,2,1,"div",80),x.Sc(2,Vt,1,0,"mat-divider",81),x.Yb(3,"div",82),x.Sc(4,Pt,4,3,"div",83),x.Sc(5,Ot,4,3,"div",84),x.Sc(6,Wt,4,3,"div",85),x.Yb(7,"div",86),x.gc("click",(function(){return x.Jc(t),x.kc().deleteNode()})),x.lc(8,"translate"),x.Yb(9,"mat-icon",87),x.Uc(10,"delete"),x.Xb(),x.Xb(),x.Xb(),x.Xb()}if(2&t){const t=x.kc();x.sc("@fadeInOut",void 0)("ngStyle",x.wc(10,zt,t.editControlsPosition.left+"px",t.editControlsPosition.top+"px")),x.Gb(1),x.sc("ngIf","EndActuator"!==t.selectElement.name&&t.editControls.length>0),x.Gb(1),x.sc("ngIf","EndActuator"!==t.selectElement.name&&t.editControls.length>0),x.Gb(2),x.sc("ngIf","line"!==t.selectElement.type),x.Gb(1),x.sc("ngIf","line"!==t.selectElement.type&&"EndActuator"!==t.selectElement.name),x.Gb(1),x.sc("ngIf","linkLine"!==t.selectElement.name&&"trigger"!==t.selectElement.type&&"EndActuator"!==t.selectElement.name&&"DiversionFilter"!==t.selectElement.name),x.Gb(1),x.sc("matTooltip",x.mc(8,8,"strategy.delete"))}}function Kt(t,e){if(1&t){const t=x.Zb();x.Yb(0,"div",94),x.Yb(1,"mat-form-field",95),x.Yb(2,"mat-label",96),x.Uc(3),x.lc(4,"translate"),x.Xb(),x.Yb(5,"input",97,98),x.gc("input",(function(e){return x.Jc(t),x.kc().setText(e)})),x.Xb(),x.Xb(),x.Xb()}if(2&t){const t=x.kc();x.sc("@fadeInOut",void 0)("ngStyle",x.wc(5,zt,t.inputPosition.left+"px",t.inputPosition.top+"px")),x.Gb(3),x.Vc(x.mc(4,3,t.label))}}function qt(t,e){if(1&t){const t=x.Zb();x.Yb(0,"div",101),x.gc("click",(function(){x.Jc(t);const e=x.kc().$implicit;return x.kc(2).changeTypes(e)})),x.lc(1,"translate"),x.jc(),x.Yb(2,"svg",90),x.Tb(3,"circle",91),x.Xb(),x.Xb()}if(2&t){const t=x.kc().$implicit;x.sc("matTooltip",x.mc(1,2,t.name))("id","change-"+t.type)}}function _t(t,e){if(1&t&&(x.Wb(0),x.Sc(1,qt,4,4,"div",100),x.Vb()),2&t){const t=e.$implicit;x.Gb(1),x.sc("ngIf","EndActuator"!==t.type||"EndActuator"===t.type)}}function $t(t,e){if(1&t&&(x.Yb(0,"div",99),x.Yb(1,"div",82),x.Sc(2,_t,2,1,"ng-container",88),x.Xb(),x.Xb()),2&t){const t=x.kc();x.sc("ngStyle",x.wc(3,zt,t.changeTypePosition.left+"px",t.changeTypePosition.top+"px"))("@fadeInOut",void 0),x.Gb(2),x.sc("ngForOf",t.changedTypes)}}function te(t,e){if(1&t&&(x.Yb(0,"span",112),x.Uc(1),x.lc(2,"translate"),x.Xb()),2&t){const t=x.kc(2);x.Gb(1),x.Xc("",x.mc(2,2,"strategy.editInfo.selectedRules"),"\xa0:\xa0",t.selectElement.params.couponRules.length,"")}}function ee(t,e){if(1&t&&(x.Yb(0,"span",112),x.Uc(1),x.lc(2,"translate"),x.Xb()),2&t){const t=x.kc(2);x.Gb(1),x.Xc("",x.mc(2,2,"strategy.editInfo.selectedTag"),"\xa0:\xa0",t.selectElement.params.selectedTag.length,"")}}const se=function(t){return{y:"100%",opacity:"0",delay:t,duration:"500ms"}},ne=function(t){return{value:"*",params:t}};function ie(t,e){if(1&t){const t=x.Zb();x.Yb(0,"mat-chip",116),x.gc("removed",(function(){x.Jc(t);const s=e.$implicit;return x.kc(3).removeTag(s)})),x.Yb(1,"span"),x.Uc(2),x.Xb(),x.Yb(3,"mat-icon",117),x.Uc(4,"cancel"),x.Xb(),x.Xb()}if(2&t){const t=e.$implicit,s=e.index;x.sc("removable",!0)("selectable",!1)("matTooltip",t.name)("@animate",x.vc(7,ne,x.vc(5,se,50*s+"ms"))),x.Gb(2),x.Vc(t.name)}}function ce(t,e){if(1&t){const t=x.Zb();x.Wb(0),x.Yb(1,"div",113),x.Yb(2,"mat-chip-list"),x.Yb(3,"button",114),x.gc("click",(function(){x.Jc(t);const e=x.kc(2),s=x.Fc(120);return e.openPassengersTag(s)})),x.Yb(4,"mat-icon",108),x.Uc(5,"add "),x.Xb(),x.Xb(),x.Sc(6,ie,5,9,"mat-chip",115),x.Xb(),x.Xb(),x.Vb()}if(2&t){const t=x.kc(2);x.Gb(6),x.sc("ngForOf",t.selectElement.params.selectedTag)}}function ae(t,e){if(1&t){const t=x.Zb();x.Yb(0,"div",122),x.Yb(1,"div",12),x.Yb(2,"span"),x.Uc(3),x.lc(4,"translate"),x.Xb(),x.Yb(5,"button",123),x.gc("click",(function(){x.Jc(t);const s=e.$implicit;return x.kc(3).removeCoupon(s)})),x.Yb(6,"mat-icon",124),x.Uc(7,"cancel"),x.Xb(),x.Xb(),x.Xb(),x.Yb(8,"span",16),x.Uc(9),x.lc(10,"translate"),x.Xb(),x.Yb(11,"span",16),x.Uc(12),x.Xb(),x.Yb(13,"span",16),x.Uc(14),x.lc(15,"translate"),x.Xb(),x.Xb()}if(2&t){const t=e.$implicit;x.sc("@animate",x.vc(15,ne,x.vc(13,se,100*e.index+"ms"))),x.Gb(3),x.Xc("",x.mc(4,7,"strategy.editInfo.couponName"),"\xa0:\xa0\xa0\xa0",t.name,""),x.Gb(6),x.Wc("",x.mc(10,9,"strategy.editInfo.couponCoding"),"\xa0:"),x.Gb(3),x.Vc(t.code),x.Gb(2),x.Xc("",x.mc(15,11,"strategy.editInfo.couponSource"),"\xa0:\xa0\xa0\xa0",t.source,"")}}function oe(t,e){if(1&t){const t=x.Zb();x.Wb(0),x.Yb(1,"div",118),x.Yb(2,"div",119),x.gc("click",(function(){x.Jc(t);const e=x.kc(2),s=x.Fc(122);return e.openCouponRuleSelect(s)})),x.Yb(3,"mat-icon"),x.Uc(4,"add_circle_outline"),x.Xb(),x.Yb(5,"span",120),x.Uc(6),x.lc(7,"translate"),x.Xb(),x.Xb(),x.Sc(8,ae,16,17,"div",121),x.Xb(),x.Vb()}if(2&t){const t=x.kc(2);x.Gb(6),x.Vc(x.mc(7,2,"strategy.editInfo.addCoupon")),x.Gb(2),x.sc("ngForOf",t.selectElement.params.couponRules)}}function re(t,e){if(1&t){const t=x.Zb();x.Yb(0,"div",119),x.gc("click",(function(){x.Jc(t);const e=x.kc(3),s=x.Fc(124);return e.openMessageSelect(s)})),x.Yb(1,"mat-icon"),x.Uc(2,"add_circle_outline"),x.Xb(),x.Yb(3,"span",120),x.Uc(4),x.lc(5,"translate"),x.Xb(),x.Xb()}2&t&&(x.Gb(4),x.Vc(x.mc(5,1,"strategy.editInfo.addMsgTemplate")))}const le=function(){return{opacity:"0",delay:"100ms",duration:"500ms"}};function de(t,e){if(1&t){const t=x.Zb();x.Yb(0,"div",127),x.gc("click",(function(){x.Jc(t);const e=x.kc(3),s=x.Fc(124);return e.openMessageSelect(s)})),x.Yb(1,"div",128),x.Yb(2,"div",12),x.Yb(3,"span"),x.Uc(4),x.lc(5,"translate"),x.Xb(),x.Yb(6,"button",123),x.gc("click",(function(){return x.Jc(t),x.kc(3).removeMessage()})),x.Yb(7,"mat-icon",124),x.Uc(8,"cancel"),x.Xb(),x.Xb(),x.Xb(),x.Yb(9,"span"),x.Uc(10),x.Xb(),x.Xb(),x.Yb(11,"span",16),x.Uc(12),x.lc(13,"translate"),x.Xb(),x.Yb(14,"span",16),x.Uc(15),x.lc(16,"translate"),x.Xb(),x.Yb(17,"span",16),x.Uc(18),x.Xb(),x.Xb()}if(2&t){const t=x.kc(3);x.sc("@animate",x.vc(14,ne,x.uc(13,le))),x.Gb(4),x.Wc("",x.mc(5,7,"strategy.editInfo.smsTemplateName"),":"),x.Gb(6),x.Wc(" \xa0\xa0\xa0",t.selectElement.params.template.messageTemplateName," "),x.Gb(2),x.Xc("",x.mc(13,9,"strategy.editInfo.smsTemplateType"),"\xa0:\xa0\xa0\xa0",t.selectElement.params.template.messageTemplateType,""),x.Gb(3),x.Wc("",x.mc(16,11,"strategy.editInfo.smsSendSupport"),":"),x.Gb(3),x.Vc(t.selectElement.params.template.messageSendSupport)}}function ge(t,e){if(1&t&&(x.Wb(0),x.Yb(1,"div",118),x.Sc(2,re,6,3,"div",125),x.Sc(3,de,19,16,"div",126),x.Xb(),x.Vb()),2&t){const t=x.kc(2);x.Gb(2),x.sc("ngIf",!t.selectElement.params.template),x.Gb(1),x.sc("ngIf",t.selectElement.params.template)}}function he(t,e){if(1&t){const t=x.Zb();x.Yb(0,"div",102),x.gc("mousewheel",(function(e){return x.Jc(t),x.kc().onWheel(e)})),x.Tb(1,"div",103),x.Yb(2,"div",104),x.Yb(3,"div",105),x.Yb(4,"span"),x.Uc(5),x.Xb(),x.Sc(6,te,3,4,"span",106),x.Sc(7,ee,3,4,"span",106),x.Yb(8,"button",107),x.gc("click",(function(){return x.Jc(t),x.kc().closeEdit()})),x.Yb(9,"mat-icon",108),x.Uc(10,"close"),x.Xb(),x.Xb(),x.Xb(),x.Yb(11,"div",109),x.Sc(12,ce,7,1,"ng-container",110),x.Sc(13,oe,9,4,"ng-container",110),x.Sc(14,ge,4,2,"ng-container",110),x.Xb(),x.Xb(),x.Tb(15,"div",111),x.Xb()}if(2&t){const t=x.kc();x.sc("@fadeInOut",void 0)("ngStyle",x.wc(9,zt,t.editPosition.left+"px",t.editPosition.top+"px")),x.Gb(5),x.Vc(t.selectElement.title),x.Gb(1),x.sc("ngIf",t.selectElement.params.couponRules&&t.selectElement.params.couponRules.length>0),x.Gb(1),x.sc("ngIf",t.selectElement.params.selectedTag&&t.selectElement.params.selectedTag.length>0),x.Gb(4),x.tc("ngSwitch",t.selectElement.name),x.Gb(1),x.sc("ngSwitchCase","TagFilter"),x.Gb(1),x.sc("ngSwitchCase","SendCouponActuator"),x.Gb(1),x.sc("ngSwitchCase","MessageActuator")}}function ue(t,e){1&t&&(x.Tb(0,"app-confirm-dialog",129),x.lc(1,"translate")),2&t&&x.sc("content",x.mc(1,1,"strategy.clearCanvas"))}function pe(t,e){1&t&&(x.Tb(0,"app-confirm-dialog",129),x.lc(1,"translate")),2&t&&x.sc("content",x.mc(1,1,"strategy.canLeave"))}function me(t,e){if(1&t&&(x.Yb(0,"tr"),x.Yb(1,"td"),x.Uc(2),x.lc(3,"translate"),x.Xb(),x.Yb(4,"td"),x.Uc(5),x.lc(6,"translate"),x.Xb(),x.Xb()),2&t){const t=e.$implicit;x.Gb(2),x.Vc(x.mc(3,2,t.shortcut)),x.Gb(3),x.Vc(x.mc(6,4,t.keyboard))}}function be(t,e){if(1&t&&(x.Yb(0,"table",130),x.Yb(1,"tr"),x.Yb(2,"td",131),x.Uc(3),x.lc(4,"translate"),x.Xb(),x.Xb(),x.Sc(5,me,7,6,"tr",88),x.Xb()),2&t){const t=x.kc();x.Gb(3),x.Wc(" ",x.mc(4,2,"strategy.tips.title")," "),x.Gb(2),x.sc("ngForOf",t.shortcutKeys)}}function Ae(t,e){if(1&t){const t=x.Zb();x.Yb(0,"app-tag",132),x.gc("dataSelect",(function(e){return x.Jc(t),x.kc().onTagSelect(e)})),x.Xb()}if(2&t){const t=x.kc();x.sc("overPanel",!0)("functionIndex",0)("checkbox",!0)("selectedRows",t.selectedTags)}}function ye(t,e){if(1&t){const t=x.Zb();x.Yb(0,"app-coupon",132),x.gc("dataSelect",(function(e){return x.Jc(t),x.kc().onCouponSelect(e)})),x.Xb()}if(2&t){const t=x.kc();x.sc("overPanel",!0)("functionIndex",1)("checkbox",!0)("selectedRows",t.selectedCouponRules)}}function fe(t,e){if(1&t){const t=x.Zb();x.Yb(0,"app-message",133),x.gc("dataSelect",(function(e){return x.Jc(t),x.kc().onMessageSelect(e)})),x.Xb()}if(2&t){const t=x.kc();x.sc("overPanel",!0)("functionIndex",2)("singleSelect",!0)("selectedRow",t.selectedMsgTemplate)}}function we(t,e){if(1&t){const t=x.Zb();x.Yb(0,"app-activity",133),x.gc("dataSelect",(function(e){return x.Jc(t),x.kc().onActivitySelect(e)})),x.Xb()}if(2&t){const t=x.kc();x.sc("overPanel",!0)("functionIndex",3)("singleSelect",!0)("selectedRow",t.selectedActivity)}}const ve=function(){return{x:"-100%",opacity:"0",delay:"300ms",duration:"300ms"}},Ee=function(){return{y:"-100%",opacity:"0",delay:"300ms",duration:"300ms"}},Ge=function(){return{y:"-100%",opacity:"0",delay:"400ms",duration:"300ms"}},Te=function(){return{right:"24px"}},Se=function(t){return{"canvas-right":t}},Me=function(){return{scale:"0.1",delay:"300ms",duration:"500ms"}},ke=function(t){return{transform:t}};let xe=(()=>{class t{constructor(t,e,s,n,i,c,a,o,r,l,d,g,h,u){this.fileDownload=t,this.dialog=e,this.http=s,this.notify=n,this.layout=i,this.router=c,this.activatedRoute=a,this.loading=o,this.translate=r,this.snackBar=l,this.sidebarService=d,this.passengerTagService=g,this.couponService=h,this.strategyService=u,this.unsubscribeAll=new m.a,this.db=[],this.process=new Ie,this.triggers=[],this.controls=[],this.actuators=[],this.operations=[],this.offset={x:0,y:0},this.existTrigger=!1,this.nodes=[],this.isDAG=!1,this.edges=[],this.svgScale=1,this.canvasListener=!1,this.singleTrigger=!1,this.position=null,this.positionKey="",this.drawFlag=!1,this.drawLine=null,this.targetNode=new Le,this.sourceNode=new Le,this.editControlsPosition={left:0,top:0},this.editPosition={left:0,top:0},this.changeTypePosition={left:0,top:0},this.label="",this.inputPosition={left:0,top:0},this.showEditControls=!1,this.showEditPanel=!1,this.showInput=!1,this.showChangeType=!1,this.editControls=[],this.changedTypes=[],this.cachedTypes=[],this.selectedCouponRules=[],this.selectedMsgTemplate={},this.selectedTags=[],this.noShortcut=!1,this.selectedActivity=null,this.currentActivity=null,this.shortcutKeys=[],this.propertyOpenFold=!1,this.isFullScreen=!1,this.finished=!1,this.processId="",this.isReload=!1,this.isCopy=!1,this.detailId="",this.strategy=(new p.d).group({id:new p.e(""),name:new p.e("",p.u.required),enabled:new p.e(!1),strategyDesc:new p.e(""),beginDate:new p.e("",p.u.required),endDate:new p.e("",p.u.required)}),this.detailId=this.activatedRoute.snapshot.paramMap.get("id"),this.detailId?(this.isReload=!0,this.config={enableTime:!0,time_24hr:!0,enableSeconds:!0}):this.config={enableTime:!0,time_24hr:!0,minDate:new Date(new Date((new Date).toLocaleDateString()).getTime()),enableSeconds:!0}}ngOnInit(){this.initControlPanel(),this.initShortcutKeys(),this.notify.foldChange.subscribe(t=>{setTimeout(()=>{this.changePanelPosition()},100)}),this.notify.openChange.subscribe(t=>{setTimeout(()=>{this.changePanelPosition()},100)}),this.translate.onLangChange.subscribe(t=>{this.startTime.setDateLocale(t.lang),this.endTime.setDateLocale(t.lang),setTimeout(()=>{this.isReload&&this.reloadStrategy()})}),this.svgCanvas=document.getElementById("canvas"),this.svgSelection=i.c(this.svgCanvas)}ngAfterViewInit(){if(localStorage.getItem("selectedLang")){const t=localStorage.getItem("selectedLang");this.startTime.setDateLocale(t),this.endTime.setDateLocale(t)}setTimeout(()=>{this.setImagesToCircle(this.triggers),this.setImagesToCircle(this.controls),this.setImagesToCircle(this.actuators),this.detailId&&this.reloadStrategy()},300)}reloadStrategy(){this.clearNodesAndEdges(),this.strategyService.getStrategy(this.detailId).then(t=>{console.log(t),this.loadFromExit(t)})}loadFromExit(t){const e=JSON.parse(t.json);e.activity&&(this.currentActivity=e.activity),this.strategy.patchValue(t),this.processId=e.id,this.nodes=e.sourceNodes,this.edges=e.sourceEdges,this.svgScale=e.scale,this.recoverNodesAndEdges()}recoverNodesAndEdges(){this.nodes.forEach(t=>{t.center.parentNode=t}),this.edges.forEach(t=>{t.sourceNode=this.nodes.find(e=>e.id===t.sourceNode.id),t.targetNode=this.nodes.find(e=>e.id===t.targetNode.id)}),this.drawNodesAndEdges()}drawNodesAndEdges(){this.nodes.forEach(t=>{this.drawNodeFromExit(t)}),this.edges.forEach(t=>{this.drawLineFromExit(t)}),this.svgSelection.select("g").attr("transform","scale("+this.svgScale+")"),this.addTransformToCanvas(),this.addListeners(),this.recoverParamsAndDraw()}addListeners(){this.nodes.forEach(t=>{this.addDragToG(t),this.addListenerToNode(t)}),this.edges.forEach(t=>{this.addListenerToLine(t)})}drawNodeFromExit(t){const e=i.c("#"+t.name).html(),s=i.c(this.svgCanvas).select("#nodes").append("g");s.html(e),s.attr("id",t.id),this.gTransform(s,t.x,t.y),t.g=s}drawLineFromExit(t){const e=t.sourceNode.center,s=t.targetNode.center,n=i.b();n.moveTo(e.x,e.y),n.lineTo(s.x,s.y);const c=n.toString(),a=t.id;this.drawLine=i.c(this.svgCanvas).select("#lines").append("g").attr("id",a).style("cursor","pointer");const o=this.getRectAttrs(e,s,t);this.drawLine.append("path").attr("d",c).attr("marker-end","url(#markerArrow)"),this.drawLine.append("path").attr("d",c).style("stroke-width",10).style("opacity",0),"DiversionFilter"===t.sourceNode.name&&(this.drawLine.append("rect").attr("x",o.centerX-30).attr("y",o.centerY-12).attr("width",60).attr("height",22).attr("rx",10).style("fill","white").style("stroke","#00000080"),this.drawLine.append("text").style("font-size","14px").style("font-family","Muli").attr("id",a+"_text").attr("text-anchor","middle").attr("x",o.centerX).attr("y",o.centerY+4)),t.g=this.drawLine}recoverParamsAndDraw(){this.nodes.forEach(t=>{}),this.edges.forEach(t=>{"DiversionFilter"===t.sourceNode.name&&t.params.chance&&i.c("#"+t.id+"_text").text(t.params.chance+"%")}),this.loading.hide()}initSms(){this.http.get(sessionStorage.getItem("baseUrl")+"bridge4sms/api/sms-infos?page=0&size=2000").subscribe(t=>{console.log(t)})}changePanelPosition(){this.showEditControls&&this.getPanelPosition()}openActivity(t){this.selectedActivity=this.currentActivity,this.dialog.open(t,{id:"activity",width:"80%"}).afterClosed().subscribe(t=>{t?this.currentActivity=this.selectedActivity:this.selectedActivity=null})}onActivitySelect(t){this.selectedActivity=t}openPassengersTag(t){this.selectedTags=[],Object.assign(this.selectedTags,this.selectElement.params.selectedTag),this.dialog.open(t,{id:"tagSelect",width:"80%"}).afterClosed().subscribe(t=>{t?(this.selectElement.params.selectedTag=[],Object.assign(this.selectElement.params.selectedTag,this.selectedTags)):this.selectedTags=[]})}setTextToLine(t){i.c("#"+this.selectElement.id+"_text").text(t)}onTagSelect(t){this.selectedTags=t}removeTag(t){this.selectElement.params.selectedTag=this.selectElement.params.selectedTag.filter(e=>e!==t)}openCouponRuleSelect(t){console.log(t),this.selectedCouponRules=[],Object.assign(this.selectedCouponRules,this.selectElement.params.couponRules),this.dialog.open(t,{id:"couponRule",width:"80%"}).afterClosed().subscribe(t=>{t?(this.selectElement.params.couponRules=[],Object.assign(this.selectElement.params.couponRules,this.selectedCouponRules)):this.selectedCouponRules=[]})}onCouponSelect(t){this.selectedCouponRules=t}removeCoupon(t){this.selectElement.params.couponRules=this.selectElement.params.couponRules.filter(e=>e!==t)}openMessageSelect(t){this.selectedMsgTemplate={},Object.assign(this.selectedMsgTemplate,this.selectElement.params.template),this.dialog.open(t,{id:"messageTemplate",width:"80%"}).afterClosed().subscribe(t=>{t&&this.selectedMsgTemplate?(this.selectElement.params.template={},Object.assign(this.selectElement.params.template,this.selectedMsgTemplate)):this.selectedMsgTemplate=null})}onMessageSelect(t){this.selectedMsgTemplate=t}removeMessage(){this.selectElement.params.template=null}initShortcutKeys(){this.shortcutKeys=[{shortcut:"strategy.tips.edit",keyboard:"strategy.tips.editKey"},{shortcut:"strategy.tips.line",keyboard:"strategy.tips.lineKey"},{shortcut:"strategy.tips.delete",keyboard:"strategy.tips.deleteKey"},{shortcut:"strategy.tips.moveUp",keyboard:"strategy.tips.moveUpKey"},{shortcut:"strategy.tips.moveDown",keyboard:"strategy.tips.moveDownKey"},{shortcut:"strategy.tips.zoomIn",keyboard:"strategy.tips.zoomInKey"},{shortcut:"strategy.tips.zoomOut",keyboard:"strategy.tips.zoomOutKey"},{shortcut:"strategy.tips.drawBegin",keyboard:"strategy.tips.drawBeginKey"},{shortcut:"strategy.tips.append",keyboard:"strategy.tips.appendKey"},{shortcut:"strategy.tips.totalDrag",keyboard:"strategy.tips.totalDragKey"},{shortcut:"strategy.tips.operate",keyboard:"strategy.tips.operateKey"},{shortcut:"strategy.tips.nodeDrag",keyboard:"strategy.tips.nodeDragKey"}]}showTips(t){this.dialog.open(t,{id:"strategyTips"})}saveSvg(){this.toSvg(this.translate.instant("strategy.downloadSvg"))}toSvg(t){const e=i.c("#canvas").node().outerHTML;(new c).file(t,e).forEach((t,e)=>{e.async("blob").then(e=>{this.fileDownload.blobDownload(e,t)})})}loadFromJson(t){if(t.target.value.lastIndexOf(".json")===t.target.value.length-5){const e=t.target.files[0],s=new FileReader;s.readAsText(e),s.onloadend=e=>{try{const s=JSON.parse(e.target.result),n=JSON.parse(s.json);s.json&&n.sourceNodes&&n.sourceEdges&&n.scale?(this.clearNodesAndEdges(),this.loading.show(),this.loadFromExit(s),t.target.value=""):(this.snackBar.open(this.translate.instant("strategy.message.wrongFile"),"\u2716"),t.target.value="")}catch(s){this.snackBar.open(this.translate.instant("strategy.message.wrongFile"),"\u2716"),console.log(s),t.target.value=""}}}else t.target.value="",this.snackBar.open(this.translate.instant("strategy.message.noJson"),"\u2716")}saveJson(){const t=S(M(this.nodes)),e=S(M(this.edges));this.formatStrategy(t,e);const s={json:JSON.stringify({sourceNodes:t,sourceEdges:e,scale:this.svgScale})},n=new Blob([JSON.stringify(s)],{type:"application/json"});this.fileDownload.blobDownload(n,this.translate.instant("strategy.downloadJson"))}formatStrategy(t,e){t.forEach(t=>{delete t.center.parentNode,delete t.g}),e.forEach(t=>{delete t.g,delete t.sourceNode.center.parentNode,delete t.sourceNode.g,delete t.sourceNode.params,delete t.targetNode.params,delete t.targetNode.g,delete t.targetNode.center.parentNode})}publish(){}onPanelClick(){this.selectElement&&(this.selectElement.g.classed("node-selected",!1),this.hideEditFlags())}save(){const t=this.checkStrategy(),e=this.checkNoTrigger(),s=this.checkHundredShunt(),n=this.checkControlNoTarget();if(!this.strategy.valid||t||e||s||n)this.strategy.markAllAsTouched(),t?this.snackBar.open(this.translate.instant("strategy.message.singleNode"),"\u2716"):e?this.snackBar.open(this.translate.instant("strategy.message.noTrigger"),"\u2716"):s?this.snackBar.open(this.translate.instant("strategy.message.hundredShunt"),"\u2716"):n?this.snackBar.open(this.translate.instant("strategy.message.noTarget"),"\u2716"):(this.propertyOpenFold=!1,this.snackBar.open(this.translate.instant("strategy.message.formNotValid"),"\u2716"));else{this.loading.show();const t=this.strategy.getRawValue();let e;this.process=t,this.process.beginDate=new Date(this.process.beginDate).toISOString(),this.process.endDate=new Date(this.process.endDate).toISOString(),e={id:this.processId?this.processId:"process_"+u(),name:t.name,node:[],edge:[],sourceNodes:[],sourceEdges:[],scale:this.svgScale};let s="";this.nodes.forEach(t=>{const s=new Ye;s.id=t.id,s.type=t.name,s.name=t.title,Object.entries(t.params).length>0?s.params=this.getNodeParams(t):"trigger"!==t.type&&"DiversionFilter"!==t.name&&"EndActuator"!==t.name&&Object.entries(t.params),e.node.push(s)}),this.edges.forEach(t=>{const n=new Ce;n.source=t.sourceNode.id,n.target=t.targetNode.id,Object.entries(t.params).length>0?n.params=t.params:"DiversionFilter"===t.sourceNode.name&&(s+='"'+t.sourceNode.title+'" '),e.edge.push(n)}),e.sourceEdges=S(M(this.edges)),e.sourceNodes=S(M(this.nodes)),console.log(this.nodes),this.formatStrategy(e.sourceNodes,e.sourceEdges),this.currentActivity&&(e.activity=this.currentActivity),this.process.json=JSON.stringify(e),this.process.createBy="widzz",this.process.createDate=(new Date).toISOString(),console.log(JSON.stringify(this.process)),this.isReload?this.strategyService.updateStrategy(this.process).then(()=>{this.finished=!0,this.cancel(!0),this.processId="",this.loading.hide()},t=>{this.loading.hide()}):setTimeout(()=>{this.strategyService.createStrategy(this.process).then(()=>{this.finished=!0,this.loading.hide(),this.processId="",this.cancel(!0)})},300)}}getNodeParams(t){const e=S(M(t));switch(e.name){case"TagFilter":return e.params.selectedTag=e.params.selectedTag.map(t=>t.name).join(","),e.params;case"SendCouponActuator":return e.params.couponRules=e.params.couponRules.map(t=>t.number).join(","),e.params}}cancel(t){sessionStorage.setItem("routeReload",JSON.stringify({reload:t})),history.back()}checkStrategy(){let t=!1;return this.nodes.forEach(e=>{this.edges.find(t=>t.id.includes(e.id))||(t=!0)}),t}checkNoActivity(){let t=!1;return this.nodes.find(t=>"SendCouponActuator"===t.name)&&!this.currentActivity&&(t=!0),t}checkControlNoTarget(){let t=!1;return this.nodes.forEach(e=>{"control"!==e.type||"EndActuator"===e.name||this.edges.find(t=>t.sourceNode.id===e.id)||(t=!0)}),t}checkNoTrigger(){let t=!1;return this.nodes.find(t=>"trigger"===t.type)||(t=!0),t}checkHundredShunt(){let t=!1;const e={};return this.edges.forEach(t=>{"DiversionFilter"===t.sourceNode.name&&t.params.chance&&(e[t.sourceNode.id]||(e[t.sourceNode.id]=0),e[t.sourceNode.id]+=Number(t.params.chance))}),Object.values(e).forEach(e=>{e<100&&(t=!0)}),t}onStartSourceDate(t,e){e.picker.set("minDate",t)}onEndSourceDate(t,e){e.picker.set("maxDate",t)}propertyOpenOrFold(){this.propertyOpenFold=window.innerWidth>=960&&!this.propertyOpenFold}onResize(){document.fullscreenElement?(this.isFullScreen=!0,this.layout.hideLayout()):(this.isFullScreen=!1,this.layout.showLayout())}onKeyPress(t){if("F11"===t.code)t.preventDefault(),t.stopPropagation(),this.setFullScreen();else if(this.selectElement&&this.showEditControls&&!this.noShortcut)switch(t.code){case"KeyE":"trigger"!==this.selectElement.type&&"DiversionFilter"!==this.selectElement.name&&"EndActuator"!==this.selectElement.name&&"linkLine"!==this.selectElement.name&&this.showEdit();break;case"Space":"EndActuator"!==this.selectElement.name&&this.lineNode();break;case"Delete":case"Backspace":this.deleteNode()}}setFullScreen(){document.fullscreenElement?document.exitFullscreen().then(()=>{}):document.documentElement.requestFullscreen().then(()=>{})}clearAll(){this.noShortcut=!0,this.dialog.open(this.clearCanvas,{id:"clearCanvas"}).afterClosed().subscribe(t=>{t&&(this.clearNodesAndEdges(),this.strategy.markAsUntouched()),this.noShortcut=!1})}clearNodesAndEdges(){this.nodes.length>0&&(this.nodes.forEach(t=>{t.g.remove()}),this.edges.forEach(t=>{t.g.remove()}),this.hideEditFlags(),this.errorMsg="",this.nodes=[],this.edges=[])}setImagesToCircle(t,e,s){const n=i.c("#patterns"),c=s?2*s:40;t.forEach(t=>{"line"===e?(n.select("#l-"+t.type).node()||n.append("pattern").attr("id","l-"+t.type).attr("patternUnits","objectBoundingBox").attr("height",1).attr("width",1).append("image").attr("height",c).attr("width",c).attr("xmlns:xlink","http://www.w3.org/1999/xlink").attr("xlink:href",t.imgSrc),i.c("#line-"+t.type+" circle").attr("fill","url(#l-"+t.type+")")):"change"===e?(n.select("#c-"+t.type).node()||n.append("pattern").attr("id","c-"+t.type).attr("patternUnits","objectBoundingBox").attr("height",1).attr("width",1).append("image").attr("height",c).attr("width",c).attr("xmlns:xlink","http://www.w3.org/1999/xlink").attr("xlink:href",t.imgSrc),i.c("#change-"+t.type+" circle").attr("fill","url(#c-"+t.type+")")):(n.append("pattern").attr("id","p-"+t.type).attr("patternUnits","objectBoundingBox").attr("height",1).attr("width",1).append("image").attr("height",c).attr("width",c).attr("xmlns:xlink","http://www.w3.org/1999/xlink").attr("xlink:href",t.imgSrc),i.c("#"+t.type+" .center").attr("fill","url(#p-"+t.type+")"))})}initControlPanel(){this.triggers=[{imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkRCQTQ0REFCQTVDMTFFOUJFMTBCQzFGREU1NTE1NzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkRCQTQ0REJCQTVDMTFFOUJFMTBCQzFGREU1NTE1NzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2REJBNDREOEJBNUMxMUU5QkUxMEJDMUZERTU1MTU3MyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2REJBNDREOUJBNUMxMUU5QkUxMEJDMUZERTU1MTU3MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pmqnw2sAAAH9SURBVHja7JfPLwNBFMdnqsJBxI+mQiQODi449uDiJtyQaBwcBA1/BFd/BKIOEkSiThIXB4mbAyc/gsRBI4ukB1yqfb67M9ttt3uo7RqVzKRv38yb7e5n3o+ZlhMRq+UWYjXeNKAG1IAaUAMG2KLrr7PRjbeZIJ/J/R51gBlknE8yoiZogm6AeQL9ZvS30f9En0O/4x2pl0TkUhkgvDQEiDPnKVxooiSeNopRZ5HNvmvYSEROf/qusE/PpyC3gNhnzgq/MP4A1qOVOkTF6ROHHEAiagCJoriuGQvtKxWmg6mW1RWJCF+bB0gcMl22HsZaCyH/qyoG2Dgg9iA7yNGpkvVYH3/Nb4iZh5ceUHEZMv3L+X0l3/nNIvGIOjcAsWvSQT+74H27MJAQI6QjKOY0ukvQi9BPCPlYUYgVnyQi4cMy93oBdWznGZfz8NoR5voKkVJaJGRlmh3GO7z6Ru5zNvwhIn2F/rW8J63eg0R1cpTEuB9yTk4xXEAPQDYLHlRaJMKD5mbNcHzNyVDHgJ3DDKGaY7DnYJ6XC+pQu80ID2Zd1hbY04DLW/3SllUbYq9wCWhzhqos3IBy0F2VwnMhFEcoqE262o26ywXdg2u3HNWX3au4SLZwPXFZV2FvBGje+gFbepKYW1BG6S9q/adJA2pADagBNeD/APwWYACUpbhXEx+hmgAAAABJRU5ErkJggg==",name:"strategy.securityCheck",type:"securityCheck",belongType:"strategy.trigger"},{imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkRCQTQ0RDZCQTVDMTFFOUJFMTBCQzFGREU1NTE1NzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkRCQTQ0RDdCQTVDMTFFOUJFMTBCQzFGREU1NTE1NzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2REJBNDRENEJBNUMxMUU5QkUxMEJDMUZERTU1MTU3MyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2REJBNDRENUJBNUMxMUU5QkUxMEJDMUZERTU1MTU3MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpXMx1MAAAIsSURBVHja7Fc9SwNBEN3NhwkIQoymULQS/0BKQSxtghZa2VgoigTsRBEbCxEbESyEBLQQ/0IKG/0DImqlYGEjBAULSSRf49u7vWTvLs3FrKTYJZOZnVnYl9mZtxtORKyXR4j1+DAADUAD0AA0AHt8RIIsTuU+GOO85RDXpJj7r8tNSBaxZ8QWYJfFuuJKUi/AJihnOOBsPQrPBmRHeKww0QRUAfEZ1uGdHwygmi135hKQdcg8/A+IvCPWkLEY7Cj8Vf0A1dp1Z6QOOYLsOX7xrRRD7H8ySLSMTOzCinsyKQDW1Kxy9fgZ64NUUMOHxdWhvM4MnrvqsH2D+GtWroOVgyevk2aqDjBSN1fxOHH1RzRLmNd182DJAgXBtqdW1xLdufpI1f6mCutukrjUc9jwFXoKm6ZhX0IveTL6iPm2xYGgUBmrBQXIg/wnSeU/xeIXbDaJzRahT+AYwdH1wS4hFpaZ+oE9DDnAXHR8tlOiDgUmaaIvCaIAz43s1grshqdpviGDmCfZH0YoIFELKklj0wTZAN6kfw3fUQWcKIVbyAXkDJJBLIMTmNVagyiHEjI2APMeWtTXE3z7gqC5//qbRuyau69D5ubvLgPk4mPz2TiK98pLMc25BMO9DwrOy7qPuJ+cW6LFbW5Kadd0jk/cyZqbpMbto/a/bFSKsbPszy7nEd08mIEcY6uxtserkLLveInwmGRbWnnQPPkNQAPQADQADUADsOvjV4ABALfv8DohSjmhAAAAAElFTkSuQmCC",name:"strategy.payment",type:"payment",belongType:"strategy.trigger"},{imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkRCQTQ0RDJCQTVDMTFFOUJFMTBCQzFGREU1NTE1NzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkRCQTQ0RDNCQTVDMTFFOUJFMTBCQzFGREU1NTE1NzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2Q0NCN0YyN0JBNUMxMUU5QkUxMEJDMUZERTU1MTU3MyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2Q0NCN0YyOEJBNUMxMUU5QkUxMEJDMUZERTU1MTU3MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgsHEr0AAAIpSURBVHja7Ja/axRBFMfnqST4AwPH3YmNIFYnYmUjqIUYO5s0epWVlVUKEWwsLWzFRsE0sRIE/wDF0j4gFgmkCoSLHiJCgufL5+3e7s3OKdxdbuTAGXjMm523+z7znV8rqupmuRxyM14SYAJMgAkwASbAg5UjowY2XnScmCNy0aku4V3FzmCfsPfYCvYbq3O73yb2Cv4l/A0R+cg7q9v36pvjAsqoPwtNAIlsk/g1kM4V7/V9WmuALBuIhZd9VvLYHrYE5LtYU3weWyyTVpObuheormVwft9AgMPYnebLnVYcQJGbpD1aNDPlC5C87PJwh/pH8J7fMsgbcQBVuyTb8xTz1XFajc3B/KWQlz2sG2WTVJToA5iKUnZLOKAMWsJvjPmDPI6CQ6ASQgfrTrx4/SfnYJE8UEv/BuIpJhOoN/lB7avlJ/emvDKIwVE0NLjpAtq6C5TTYLOUMQYUDiSMjTDFKhVeGayzXBl13saQwfM/bvbp7mI750QaHuw67Z92teGfxp/HP8kYTvSRtjCuHz1Gfa64kLLvxABk6HXuxQ+4b7BX5QbI6wXAHqLYLjFP6H+KffOPIcpdohtiA4oByIevU61hX4Bqm1rZzaBqh2+H/kfOVoCILb5b1KeAnaPu0f5OzFcGcBb/Mv7zGFP8mGQtEtQyXlV/qh6gzn2xa071OO0a9TPif/VVnqeeQ9HPxLyN8jeTflgTYAJMgAkwASbA/xNwX4ABAAaR2rNp23KcAAAAAElFTkSuQmCC",name:"strategy.browse",type:"browse",belongType:"strategy.trigger"},{imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkNDQjdGMjVCQTVDMTFFOUJFMTBCQzFGREU1NTE1NzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkNDQjdGMjZCQTVDMTFFOUJFMTBCQzFGREU1NTE1NzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2Q0NCN0YyM0JBNUMxMUU5QkUxMEJDMUZERTU1MTU3MyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2Q0NCN0YyNEJBNUMxMUU5QkUxMEJDMUZERTU1MTU3MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ph4JgZsAAALVSURBVHja7JjPb01REMfPPFVF80JbbfxMGxqRejYItSASgoiliMTSjoX0T5ASscYCGytJk1qKNH4sxKIihCChki60lVKkjwSvanzmnnP7Xl5XT3KSF7k3mfudM3N753tm5pxzX0VVXT1fOVfnV0YwI5gRzAhmBOv8aqjl4fbrn53zR2OzE/mNvhf9Mvo28BfjnHnFuT/h3c/wncE+BC78eLL1W9wMqnZzf4yMc4ZfsKDoXdhXgY+QMciNQXIYfQ3+LovB+Jz52q9NPWGSG+MRFBlAtqPlRaQNLBJ81lnGVNeaHX8ekuvUpqM6w73IuAXM498KDsTswS0VXz8TBGsi+AL0n8ikT3Lin8T+Q3yGF2OZUD9Bu2+ORpDg0wl63QI9QE4z/kLwDiMgnohl9ytyCrmLrSD+BXYvRiNIRlT8IjD9EHAe5Tn6oLMyhixBfhnaLZQXYD+2I3OT9POLs4qd9ZsvU5qNPrBv3kQ8UVvhD+eeDX8nqrPxCFqji9xEuw+WwFKyMNKsqH4P20xzIGUVsrZoZNwI7sF2NGYGFyGDiaRZqfrJIGmGy1mudE5iOxFzm7GgrSHwFXAU28FQvhXgS2yv0TvsGZ7aj22U8dXwhjZXOYEoR52dIP46hnRCpDcQtr2uB9yUEPHZ3IGtE/V4mNyMq/FHWkPNBFWXhD7bCfaAt8P4DSQO4Ldl/Co8exHfe4g+DS2xNCpB24RFQpepjoAjVX03VNEKhiVW7Y1QbpuERi1xeHUpZOGSna8E3JeMVduNNON34MrqRZJOotbf4bl/KHHag4eR1UghyYrIcvQN+Nejt8xbXHP7dMTPrVC69JOpOxz+w8FnPVhIEm09WLmhp1kT+RSXoOoU97MEmkb/EEq8G2zy1dO3oc+s7LmqiRnjfvFndLRVvItc3KPx76S1kvICKC+W6k28jOPce2sqWvbPo4xgRjAjmBHMCP7fBP8KMAB1OC0krJsIWQAAAABJRU5ErkJggg==",name:"strategy.calendar",type:"calendar",belongType:"strategy.trigger"},{imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkNDQjdGMjFCQTVDMTFFOUJFMTBCQzFGREU1NTE1NzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkNDQjdGMjJCQTVDMTFFOUJFMTBCQzFGREU1NTE1NzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2Q0NCN0YxRkJBNUMxMUU5QkUxMEJDMUZERTU1MTU3MyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2Q0NCN0YyMEJBNUMxMUU5QkUxMEJDMUZERTU1MTU3MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtRNbSoAAAHLSURBVHja7Jc7SwNBEMd3REsbPVPEQnxj8AuI+QKC2PoFTCF2CkawFkQbiwSFs/ED+EDwUaQLAUFBRFC0EGws4imikBQK63/udvHiA1Fx74odmJ3d27vN72Z25jYkpRRxljoRc7GAFtACWkALGHOp/+kDLa63S0KkBNFieaw5HzsPAq5NsEqZS7gexS/ERHNQPRqN4x7cE3wCYkiiqf8GpN8ctxKrd0WYND8LzEH0b6AdAG6H7YT2QfuhrdAR7NWCsSRRsg0vpikIeckH1WGvfeF76LPRLFayCaIFDQS0HfRO0T/D9XPYy3LGeYwsxH6YXe8Cpsffi1IOAOggNNeAVbsx04v5FOY5809wT96UBwUANgAwo4br2JfHCiQJbaKP9x/BmAMEwKHynvChpEyKT/ah3p+YmTT9qSvg16uhmhiA6RL09iJ87QqZXDQKqJJgSxVvHcZaD2pQoiXTWaxlFiGsEK/DYQzAuHEwHoZ9gF0D8LLxLP6mkM/DZLH20G3G2Y+iDr4vOV3q68HSyHDQF3j2OrI6GIKbgMl9cbDgdhwJshLJgVUdt7IKpoqWtYJXfhKBcpmZjtSD9j+JBbSAFtACWkAL+Cd5FWAAQH2hO3Idqm8AAAAASUVORK5CYII=",name:"strategy.offlineCheckIn",type:"offlineCheckIn",belongType:"strategy.trigger"},{imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkMyNjcwRjBCQTVDMTFFOUJFMTBCQzFGREU1NTE1NzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkNDQjdGMUVCQTVDMTFFOUJFMTBCQzFGREU1NTE1NzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2QzI2NzBFRUJBNUMxMUU5QkUxMEJDMUZERTU1MTU3MyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2QzI2NzBFRkJBNUMxMUU5QkUxMEJDMUZERTU1MTU3MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PijTIWwAAAHRSURBVHja7Jg9SMNQEMffiZ11KA6Kk4ODq4M4OPhFwUV0EAtuikMEBTdBSsWxHQTjYCYVRVxsnQXRVdCpqwjiB6IOXUQonP+X5DVpBIcqLxnewetd3ntJfty9uxwlZhZJlhaRcDGABtAAGkADmHBpbeamfD5ft+2upSHBPC+IBqHT0FVMX8Pet57sstqXy+X0e9DutApQlxhzAOrBV70NuhtjCnYJ8IexhdiFI1oVstkgcufI1/LatZmz2Ff6CyA10810OG/9bhh9GPkM+v2WmdeF9Ik+DxKtNVx6ahNjGGvL0DXXq1THXteaJJAB4YXQG0JsICFUFlwgrB+YP+AAvlfvGWRuj3h0L7LjKORZuV7TnSRVdf58mYisjzSsM6e0hhihu0V2ZUJTRZSUT4Bcwe4DmBMKvwR90AqIElJE5mbIg5WhTAHGEepalR4FyFzQGmLrcfsc6jQU4qAWBudUWRUk0I72Qg0vTgPihcIwP4FRIGksli8JvChfPhpKBBFJDPk7iX3PsXUzeHkFIIuREqSsLYT2LPZ2CxC7UMcKzse7wfxKYvpBwMxC3ftJ8gU1nsSGVdbFO4wsgN//66Fk/psxgAbQABpAA2gAY5VvAQYAhGCj4H45++gAAAAASUVORK5CYII=",name:"strategy.position",type:"position",belongType:"strategy.trigger"},{imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkMyNjcwRUNCQTVDMTFFOUJFMTBCQzFGREU1NTE1NzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkMyNjcwRURCQTVDMTFFOUJFMTBCQzFGREU1NTE1NzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2QzI2NzBFQUJBNUMxMUU5QkUxMEJDMUZERTU1MTU3MyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2QzI2NzBFQkJBNUMxMUU5QkUxMEJDMUZERTU1MTU3MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpP6UHIAAAK3SURBVHja7Jc9aFRBEIBnk0NP8YJ/GImNYqNgZSFYBTuxUa4RLAQlqZJCsFARIkbEpI1eo502YhOEswmWgqgoWKhotEpyByEinH/Jqbd+49t92fMH7iQLV7yFzc7s7Hvz3czu7Iux1konty7p8JYBZoAZYAaYAXZ4y7W6cMuNhQkxZiviLa7HshEpIFvm6mLtUrrQGNHrE/sa5BwKonykH0E/xjg3P7Dp1IoDcmMX8HQaccYY9Sm1XyB6lxvTD8gB5jYwLmCdQn4UPCvDldJkadvwU+wjUSJIG+PlVY2QJFBikmiNMXPGf3KYZBhFH8F4ySzP6XNVq++JAYiT10H6ktGYXQqXZDax+TQT2VGk28jTfn6oUvrG8FbkQpQI9kCwCFDdA6HvdZFJIyoBJE3t025LSKlvSIUCeLUYgA23nSSFEvkSwKSgHpK/n/4C3YhZZhoexrl8GcCmkNanWeRFCq0pnrtmpc0P5HYiqK/Os7d6NJcmcbRI/4He7fdmcFDqztanT3KCFe5DUxZWOoImWa+1Led+nG76h5IcmN+XP6B/d+uSbkxXtELtAvNZi64NS4eWDWPKTftMZWvHkat+Een1B2VdzD3YLc1w2u4Bcy68RWhnkaccaLrQneJoEQwBmiGNeYLhKLY8qV5Cfh4cJGmb6j8j2PD1zzlcj3KIfhWg++gD2DYin2DuFfpF9H7Wrk1PcaVk3b5sPSat/l/Mx4IXd+JQ07oDedW/Ih3UxRrjDFoRwDea5vnBzTZGBE86x+9w+LgJzgMFJzn94VqWuCYVzqV9MNYeLNJ76Xfox3FUJoXjAGz/o/gu18RZoM8z3qQO7gb6MPJ++vUYgJdxvIdxtdMV9C4AReYPIu9j7EWfZXwmySfXJPJXV3ry6O+RrkTZg9knfwaYAWaAGWAGmAFGaT8FGACG7CHJLGeGBAAAAABJRU5ErkJggg==",name:"strategy.faceDetect",type:"faceDetect",belongType:"strategy.trigger"}],this.controls=[{imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAYFBMVEUAAADxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQhZuNurAAAAH3RSTlMA4fDAILD7BJnz2MsB7WFSRDYsELyin5KQiXdpRyofzFjoWwAAAJJJREFUOMvt0UkOgzAQRNHqONjGJoyZJ+5/y6BGZADbZIEEC976q9VSYbV0h82AVa7Q1gPkDB9xv5MFnLJ+eIPH5bc7wkftvzur4FXRp9s9EVDId5gjKO26K0botouSsVAZfrDSEdP+UvAkoFo0JP0RbhsxzXKRTRHqLpSnswyFSWY4FCVQCkKASo3GvZ0mx2rxXobvFxjXwmRyAAAAAElFTkSuQmCC",name:"strategy.TagFilter",type:"TagFilter",belongType:"strategy.control"},{imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAUVBMVEUAAADxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQjxkQgva102AAAAGnRSTlMAwLC83Qn0qe3Q5tXMx51jXT4tgXx0bFOKFUO7w50AAACeSURBVDjL7ZHLDsIgEEVnKNjSBxTsQ+//f6hQF8SFTIwrTc8KkpObmTt08mtcu85Ljlka5gvQSN6AJyyIK9A411USTQjhTtRiSp95HPd3ogPQEykoqsNIfCAOaI96el8VeQB6rtfDeIWropoArZQSE4nGY0Zv7f711jcAWhQzMUaTL2PTe9F6FvQNsGWZCmYq9Qjm1pZEkTXPePJPPAC6cAxXKai93AAAAABJRU5ErkJggg==",name:"strategy.DiversionFilter",type:"DiversionFilter",belongType:"strategy.control"},{imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REI3REZBN0FCQTVFMTFFOUJFMTBCQzFGREU1NTE1NzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REMyQTk4OThCQTVFMTFFOUJFMTBCQzFGREU1NTE1NzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEQjdERkE3OEJBNUUxMUU5QkUxMEJDMUZERTU1MTU3MyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQjdERkE3OUJBNUUxMUU5QkUxMEJDMUZERTU1MTU3MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ps7sW7YAAAbmSURBVHja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",name:"strategy.EndActuator",type:"EndActuator",belongType:"strategy.control"}],this.actuators=[{imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REI3REZBNzJCQTVFMTFFOUJFMTBCQzFGREU1NTE1NzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REI3REZBNzNCQTVFMTFFOUJFMTBCQzFGREU1NTE1NzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEQjdERkE3MEJBNUUxMUU5QkUxMEJDMUZERTU1MTU3MyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQjdERkE3MUJBNUUxMUU5QkUxMEJDMUZERTU1MTU3MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoSuMHcAAARZSURBVHja7JxrqBRVAMfn+shKPxRJYYaCaIraw6RvgZJKD4JUTPGi4KOS+lJX62Lph8hLEkjdT4oQBT0sQRBBBfPxwb5EVJoPfFSgUaihiFw1Qq/b/7AH9tzTPu6c3dk9Dr8f/Jmd8ezM7P7uec3M2lYoFBLILwP4ChAMCAYEA4IBwYBgQDCCAcGAYEAwIBgQDAhGMCAYEAwIBgQDggHBgGAEA4IBwYBgQDAgGBCMYEAwIBgQDAgGBAOCEQwIBgRDhAyK5URmbH66XYuXlfudzW1llteV6ftXHOix7zOLLmVBlfelfV1vWbPcoXNcgeCipBe1+KqO8x6vjI2s8ryqtFxwLE10d4qyV5Vb3rbLEbaOm+iDSzyUs65vk5rn1xFc4t863x/T/6j6dSxyYxLcm6Pa+z7TpHyzAMGt5WY/y10L3P97mhVsVAYgOKwPbfPmnkkKYROVSf0cE4xRXgj8PK8p2xDcPP5QRisnlNPKuzXKm3n538ouZWrgIHAOgpvLJef1euW7KnPyPc762cDj/YPgEkMz3v8oZa+37bmkeNnT5ZjS4W37RRkScMyFCC5xownHmKm86fXJs70yz3rrW5SRKY9zUXlUc+EdCC7xuLJcOZfxcT5WJjvrplZvtq8XK385/7Y4sBaultyjsfRLUdxs0BdiBj6nNbXYbpvJBzMchX/r7d80ySeVL51tptZ+HvhxfmYeXFm0uWmwLOPDjFAOKgOdwZB7s2O4HW2HMgvB1SWbEeyFDHb9p20djisTlGkVyr1k++fDypGA8UGXWqL5CK7OsQbvr8f2vY/YpXmo4KcKZb+wtXyK8pjyScpjDVa2SnIngitT6/Zh2itZphm+4m27UqHsVW89tDX5EMFl0F/+uKT4hEYsg8lbyW3MoAjP6dMG117DPcpHynlncGX+uL833b5T7nnlCTsqL9hjtQd+js8Q3LfmmhsBG5SnMmqpOsps3+cJ/sD2u0mdNX6VBovdCC7J/UGLJzM8RK+9yHHOaQFMDf3RK/eWHYi5rcUSb1stOmORG1MNrldurQsdZkD1dj/2s8/G5c6UgvcyD/4/WT8V2dvE7+gZBKevgfVyt3Jf4HtHpSy/Tl3OQgQ3F3M70lzBOpUUb/j/qvymvOOVM7+Q+N3JGeWVlMcytxa3SHIXfXA4IVOlB2xcxnjrD5fZFsoaZS01uLVc9NYv5O0D8thsXwY3cF8dNNGtZ6lyb1J8lNb0nfMasE8zJVukufBOBLd+FG765Eb/AnBVLHJv1ya6LfLzO0Qf3Px5cDPhpytluCNHtbhTc+A3ENyXm0m+6JbkuQgu8U2KsneVqcHDaKrjHkWvTIpPcfTnrpJ5/MZ/ysJcsOiJTPDuKEakhUKexjeQh2kSIBgQjGBAMCAYEAwIBgQDghEMCAYEA4IBwYBgQDCC+QoQDAgGBAOCAcGAYEAwggHBgGBAMCAYEAwIRjAgGBAMCAYEA4IBwYDg/POfAAMAs/vHOu7OeqoAAAAASUVORK5CYII=",name:"strategy.SendCouponActuator",type:"SendCouponActuator",belongType:"strategy.actuator"},{imgSrc:"data:image/png;base64,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",name:"strategy.MessageActuator",type:"MessageActuator",belongType:"strategy.actuator"}],this.operations=[{imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REE0Q0Q5NUZCQTVFMTFFOUJFMTBCQzFGREU1NTE1NzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REE0Q0Q5NjBCQTVFMTFFOUJFMTBCQzFGREU1NTE1NzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEQTRDRDk1REJBNUUxMUU5QkUxMEJDMUZERTU1MTU3MyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQTRDRDk1RUJBNUUxMUU5QkUxMEJDMUZERTU1MTU3MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkA8UUsAAAXgSURBVHja7JzbbxVVFIf3QW2p0Fa5WEmpEIki3qLiJUZRI8YIBi8PGhNifFFfTXzx39BoojH6oEYfmqBGY1CJQRNRK1KJ8mCBlFYNiG25KZSWlrpWzj52zuqeds59pvl+yS89s2fOnOl8s/de+za5qakph+avFnALAIwAjACMAIwAjACMAAxgBGAEYARgBGAEYARgACMAIwAjACMAIwAjACMAAxgBGAEYARgBGAEYARjACMAoM7owDReRy+Xq9VOLxbeL14iX+LQh8UFxj3ismj+WhsX1uVRcRH0ArxM/Lm6K2X9avE3cD+B0A17irdXPSfFR8Urxswm//6p4RLxC3CqeFB8THwdwYwGvFd8t7jLpf4kvES+MpJ0R79OfFt8obo7s+8fv7zDnGRB/Iz4E4PoDvs87iU6I3/QQVe3i58WLEn5/u6+vMwF4PkTR15YAV9Ubget8Mf5LCd/fJF5FFF0/PWy2NUj6Tjwhvl58q9k/ETjHeCDte3GfL77vEXdG9m0Wvw7g2qvTFK3D4ndNvbnQg57tf7ZpP4m/iGwr6BfFbX67wxftJ+noqH271gZCVvvLOG9fIO13s92ehRuUdcCTCUqki8o4b3OCe3WGIroBAXnCtErPc97n4EW+CTbu29vHADx/9FSgdDgg3ik+TBGdbS2IKfqv8m3q6wA8v/WEeCmAsy2th78UvyXudjP7qh+gDs62tMtyd2R7UPyCmx6tWkUOzrZsm/u0iaKbAJxtNScowimiY6Rdgh0+Uj0l/jODbe4pAM/UMvFGlx/bjZYuGsDsEX9LwZFdwKvFz8TkjEt9VHqF+AOwZa8ObpkFblRXu5nDgygDgO81cEddfgLc26YporrNTY/NEiRmBPA6E32+J/5V/If4M/85qif9339BmA3AbZHPGjXbzvqPXPGsi3YfiA2XEe3myjwGwBVoNPJZh+AuDrQpPzRpOsdZp+NMzHFuOyjQlKBNW43gMwfgafUbIJsCx/zm8sNxBelUnAdLPLfqYOCYA+ZhGqwCVNrBEX3tiudN3eDTRsxxGni9ZG7kXP+Dzot+w+X7hg/7ej308OhcruX+ARgJHHPBHNs2w5wnB09rOBBIbQkcd1b8aRnFokLuiYEbzek9MXBDQMfmOGYSwMXaHuj46Aoc1+viZ0zUst7TXrTCPKy9/qGxcKP1+ziAi6U3b5dJeyTm2O6Y9Fo2m3TJyivil8UfB+rYZle8PGYMwDP1lfhcZHu5qZsLOhFTVPfW+PrG/G+H1GqK6LMEWTOlgckOl185UJBG1PsCx+7xOXa9/56uRBhq4LW31rE0ySxg1Y/iDZEbpu3iuwLFt6rPhSepN0J2Ivwpiuh4fWK273flTWCvp5YGWgYAjpF2PBwxEepDKQe8wmz/DeDScrHWtW0pvVZtnl1u2sBDAJ5dR1xxF2Jc50capNF+i8m9tIMTyDaFdOVAZwqvc43ZHkjLhaUdsEai9nUJj6bwOtea7X4AJ9cOV9yve5nLv7YhLdKiOTrJfYIcXJomPOS01sW3uOI+cG2XnwNwafrBFXcRaq7ZnJJru9Ns707TjcvSpDU7o0NfSbiywdek/eSLTcwwAODypO/IsGPGW1144L1esp0vO9N207I27VSH6UZNUb21Qdey0eReHe78GcCVSaPp903alQ1oOulvbgg8fA7AlUsXon1u0m529VvxoIvinjZp+115r2sC8CxRdWjFg06Ir+UQqC6dec40i3RdcHdab1TWX0b6mPgmk3bc5/BqjhMv882h9SZdJxq85mJen8TbZisHrNIZH3fEFOWDFXY6tPgieXVgn07JeccVD2sCuAaAnc9Z9ezd0gdnm5tj1gaAqwe4UIzqGuJranip2pu2yyXsrQJwdQEX1OXrZf3bWmEgqWO6+gb4oz5K1hUQiW8YgBHNJARgBGAAIwAjACMAIwAjACMAIwADGAEYARgBGAEYARgBGMAIwAjACMAIwAjACMAARgBGAEYARgBGAEYARv/rPwEGALjNL9lb2NXNAAAAAElFTkSuQmCC",name:"strategy.handTool",type:"handTool",belongType:"strategy.operation"},{imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REE0Q0Q5NUJCQTVFMTFFOUJFMTBCQzFGREU1NTE1NzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REE0Q0Q5NUNCQTVFMTFFOUJFMTBCQzFGREU1NTE1NzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2REJBNDREQ0JBNUMxMUU5QkUxMEJDMUZERTU1MTU3MyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQTRDRDk1QUJBNUUxMUU5QkUxMEJDMUZERTU1MTU3MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ph9sCZ8AAAYESURBVHja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",name:"strategy.connectTool",type:"connectTool",belongType:"strategy.operation"}]}onDragStart(t){const e=t.target.getBoundingClientRect();this.offset.x=t.pageX-e.left,this.offset.y=t.pageY-e.top,t.dataTransfer.setData("text/plain",t.target.id),this.dragControl=t.target,t.dataTransfer.effectAllowed="move"}onTouchStart(t){let e;t.target.parentNode?(this.dragControl=t.target.parentNode.parentNode,e=t.target.parentNode):(e=t.target,this.dragControl=t.target.parentNode);const s=e.getBoundingClientRect(),n=t.touches[0];if(this.offset.x=n.pageX-s.left,this.offset.y=n.pageY-s.top,!i.c("#dragSvg").node()){const t=i.c(e.cloneNode(!0)).style("z-index","1").style("position","absolute").style("left",s.left).style("top",s.top).attr("id","dragSvg");document.body.appendChild(t.node())}}onTouchMove(t){if(i.c("#dragSvg").node()){const e=t.touches[0];i.c("#dragSvg").style("left",e.pageX-this.offset.x).style("top",e.pageY-this.offset.y)}}onTouchEnd(t){i.c("#dragSvg").node()&&i.c("#dragSvg").remove(),document.getElementById("container-3");const e=t.changedTouches[0];if(t.offsetX=e.pageX-152,t.offsetY=e.pageY-132,"canvas"===document.elementFromPoint(e.pageX,e.pageY).id){const e=this.dragControl.getAttribute("data-type");this.drawNode(t,e)}}onDragOver(t){t.preventDefault(),t.dataTransfer.dropEffect="move"}onControlDrop(t){if(t.preventDefault(),"canvas"===t.target.id){const e=this.dragControl.getAttribute("data-type");this.drawNode(t,e)}}drawNode(t,e){const s=i.c(this.svgCanvas).select("#nodes").append("g");s.html(this.dragControl.innerHTML);const n=Math.round((t.offsetX-this.offset.x)/this.svgScale),c=Math.round((t.offsetY-this.offset.y)/this.svgScale);this.gTransform(s,n,c);const a=this.addNode(e,s,n,c);if(this.checkTriggerExit(a))return s.remove(),void this.snackBar.open(this.translate.instant("strategy.message.singleTrigger"),"\u2716");this.nodes.push(a),this.addDragToG(a),this.getNodePoints(a),this.addTransformToCanvas(),this.addListenerToNode(a),this.gSelected(a)}checkTriggerExit(t){return this.nodes.map(t=>"trigger"===t.type?t.name:null).includes(t.name)}checkNodeCanLinkTo(){return this.isDAG=!0,this.checkDAG(),this.errorMsg=this.sourceNode.id===this.targetNode.id?this.translate.instant("strategy.message.noSelf"):this.edges.find(t=>t.sourceNode.id===this.sourceNode.id&&t.targetNode.id===this.targetNode.id)?this.translate.instant("strategy.message.lineExist"):"trigger"===this.targetNode.type?this.translate.instant("strategy.message.triggerTarget"):this.isDAG?"":this.translate.instant("strategy.message.notDAG"),!!this.errorMsg}DFS(t,e,s,n){t[s[n].id]=1;for(let i=0;i<s.length;i++)if(0!==e[s[n].id][s[i].id]){if(1===t[s[i].id]){this.isDAG=!1;break}-1===t[s[i].id]||this.DFS(t,e,s,i)}t[s[n].id]=-1}checkDAG(){const t={},e={},s=[],n=[];Object.assign(s,this.edges),Object.assign(n,this.nodes);const i=new Ne;i.sourceNode=this.sourceNode,i.targetNode=this.targetNode,s.push(i);for(let c=0;c<n.length;c++){const e=n[c];t[e.id]={};for(let s=0;s<n.length;s++)t[e.id][n[s].id]=0}for(let c=0;c<s.length;c++){const e=s[c];t[e.sourceNode.id][e.targetNode.id]=1}for(let c=0;c<n.length;c++)e[n[c].id]=0;for(let c=0;c<n.length;c++)-1!==e[n[c].id]&&this.DFS(e,t,n,c)}showEditControl(t){this.showEditControls=!0,this.showEditPanel=!1,this.showInput=!1,this.showChangeType=!1,this.selectElement=t,this.getPanelPosition(),this.getEditControls()}addListenerToNode(t){t.g.on("click",()=>{this.drawFlag||(t.g.classed("node-selected")||this.gSelected(t),this.showEditControl(t))});const e=t.g.select(".center");e.on("mouseenter",t=>{if(this.drawFlag){const s=t.target.parentNode.parentNode.id;this.targetNode=this.nodes.find(t=>t.id===s),this.drawFlag&&!this.checkNodeCanLinkTo()?(e.style("cursor","pointer"),e.style("stroke","#DCFECC")):(e.style("stroke","#f9dee5"),e.style("cursor","not-allowed"))}else e.style("cursor","pointer")}),e.on("mouseleave",s=>{if(this.drawFlag){this.errorMsg="";const n=s.target.parentNode.parentNode.id;this.targetNode=this.nodes.find(t=>t.id===n),e.style("cursor","pointer"),e.style("stroke",null),t.g.classed("node-selected",!1)}}),e.on("mousedown",t=>{const s=t.target.parentNode.parentNode.id;this.targetNode=this.nodes.find(t=>t.id===s),this.drawFlag&&!this.checkNodeCanLinkTo()&&(this.drawLine.remove(),this.drawFlag=!1,this.drawNewLinePointToPoint(this.sourceNode.center,this.targetNode.center)),this.errorMsg="",e.style("stroke",null)})}drawNewLinePointToPoint(t,e){const s=i.b();s.moveTo(t.x,t.y),s.lineTo(e.x,e.y);const n=s.toString(),c=new Ne,a=t.parentNode.id+"_"+e.parentNode.id;this.drawLine=i.c(this.svgCanvas).select("#lines").append("g").attr("id",a).style("cursor","pointer");const o=this.getRectAttrs(t,e,c);this.drawLine.append("path").attr("d",n).attr("marker-end","url(#markerArrow)"),this.drawLine.append("path").attr("d",n).style("stroke-width",10).style("opacity",0),c.g=this.drawLine,c.sourceNode=t.parentNode,c.targetNode=e.parentNode,c.id=a,c.type="line","DiversionFilter"===c.sourceNode.name?(c.name=c.sourceNode.name+"Line",this.drawLine.append("rect").attr("x",o.centerX-30).attr("y",o.centerY-12).attr("width",60).attr("height",22).attr("rx",10).style("fill","white").style("stroke","#00000080"),this.drawLine.append("text").style("font-size","14px").style("font-family","Muli").attr("id",a+"_text").attr("text-anchor","middle").attr("x",o.centerX).attr("y",o.centerY+4)):c.name="linkLine",this.addListenerToLine(c),this.edges.push(c)}addListenerToLine(t){t.g.on("click",()=>{event.preventDefault(),this.hideEditFlags(),this.lineSelected(t)})}getRectAttrs(t,e,s){const n={x:0,y:0,width:0,height:0,centerX:0,centerY:0};return t.x<=e.x?t.y<=e.y?(n.x=t.x,n.y=t.y,n.width=e.x-t.x,n.height=e.y-t.y):(n.x=t.x,n.y=e.y,n.width=e.x-t.x,n.height=t.y-e.y):t.y<=e.y?(n.x=e.x,n.y=t.y,n.width=t.x-e.x,n.height=e.y-t.y):(n.x=e.x,n.y=e.y,n.width=t.x-e.x,n.height=t.y-e.y),n.centerX=n.x+n.width/2,n.centerY=n.y+n.height/2,s.x=n.x,s.y=n.y,n}drawExistLine(t){const e=i.b();e.moveTo(t.sourceNode.center.x,t.sourceNode.center.y),e.lineTo(t.targetNode.center.x,t.targetNode.center.y);const s=e.toString(),n=this.getRectAttrs(t.sourceNode.center,t.targetNode.center,t);t.g.selectAll("path").attr("d",s),t.g.select("rect").attr("x",n.centerX-30).attr("y",n.centerY-12),t.g.select("text").attr("x",n.centerX).attr("y",n.centerY+4)}lineSelected(t){t.g.classed("line-selected",!0),this.selectElement=t,this.getPanelPosition(),this.getEditControls(),this.showEditControls=!0,this.edges.forEach(e=>{e.id!==t.id&&e.g.classed("line-selected",!1)}),this.nodes.forEach(t=>{t.g.classed("node-selected",!1)})}gSelected(t){"not-allowed"!==t.g.style("cursor")&&(t.g.style("cursor","pointer"),t.g.classed("node-selected",!0),this.nodes.forEach(e=>{e.id!==t.id&&e.g.classed("node-selected",!1)}),this.edges.forEach(t=>{t.g.classed("line-selected",!1)}),this.showEditControl(t))}getEditControls(){switch(this.selectElement.type){case"trigger":this.editControls=this.controls;break;case"control":this.editControls=this.actuators.concat(this.controls);break;case"actuator":this.editControls=this.controls.concat(this.actuators);break;case"line":this.editControls=[]}setTimeout(()=>{this.setImagesToCircle(this.editControls,"line",12)})}setText(t){if("strategy.oneHundredLabel"===this.label){/(^[0-9]\d*$)/.test(t.target.value)?t.target.value>100&&(t.target.value=100):t.target.value=t.target.value.replace(/\D/g,"");const e=this.edges.filter(t=>t.sourceNode.id===this.selectElement.sourceNode.id&&t.id!==this.selectElement.id);let s=0;e.forEach(t=>{t.params.chance&&(s+=Number(t.params.chance))}),""!==t.target.value&&(s+Number(t.target.value)>100&&(t.target.value=100-s),i.c("#"+this.selectElement.id+"_text").text(t.target.value.trim()+"%"),this.selectElement.params.chance=t.target.value)}}showEdit(){this.selectElement&&"line"!==this.selectElement.type?(this.editTimestamp&&clearTimeout(this.editTimestamp),this.editTimestamp=setTimeout(()=>{this.showEditControls=!1,this.showEditPanel=!0,this.showChangeType=!1,setTimeout(()=>{"line"===this.selectElement.type?i.c("#nodeView .center").attr("fill","url(#p-"+this.selectElement.sourceNode.name+")"):i.c("#nodeView .center").attr("fill","url(#p-"+this.selectElement.name+")")})},300)):(this.showInput=!0,this.showEditControls=!1,"DiversionFilter"===this.selectElement.sourceNode.name&&(this.label="strategy.oneHundredLabel"),setTimeout(()=>{this.textInput.nativeElement.focus()}))}closeEdit(){this.showEditPanel=!1,this.showEditControls=!0,this.getEditControls()}hideEditFlags(){this.showEditControls=!1,this.showInput=!1,this.showChangeType=!1,this.showEditPanel=!1}showChangeTypes(){switch(this.showChangeType=!this.showChangeType,this.changedTypes=[],this.cachedTypes=[],this.selectElement.type){case"trigger":this.cachedTypes=this.triggers,this.changedTypes=this.triggers.filter(t=>t.type!==this.selectElement.name);break;case"control":this.cachedTypes=this.controls,this.changedTypes=this.controls.filter(t=>t.type!==this.selectElement.name);break;case"actuator":this.cachedTypes=this.actuators,this.changedTypes=this.actuators.filter(t=>t.type!==this.selectElement.name)}this.showChangeType&&setTimeout(()=>{this.setImagesToCircle(this.changedTypes,"change",12)})}changeTypes(t){const e=i.c("#"+t.type).html();this.selectElement.g.html(e),this.selectElement.name=t.type,"control"===this.selectElement.type&&this.edges.filter(t=>t.sourceNode.id===this.selectElement.id).forEach(t=>{if("DiversionFilter"===t.sourceNode.name){if(t.name=t.sourceNode.name+"Line",!t.g.select("rect").node()){const e=this.getRectAttrs(t.sourceNode.center,t.targetNode.center,t);t.g.append("rect").attr("x",e.centerX-30).attr("y",e.centerY-12).attr("width",60).attr("height",24).attr("rx",10).style("fill","white").style("stroke","#00000080"),t.g.append("text").style("font-size","14px").style("font-family","Muli").attr("id",t.id+"_text").attr("text-anchor","middle").attr("x",e.centerX).attr("y",e.centerY+4)}}else t.name="linkLine",t.g.select("rect").node()&&(t.g.select("rect").remove(),t.g.select("text").remove());t.params={}}),this.selectElement.translate="strategy."+this.selectElement.name,this.changedTypes=this.cachedTypes.filter(e=>e.type!==t.type),setTimeout(()=>{this.addListenerToNode(this.selectElement),this.setImagesToCircle(this.changedTypes,"change",12),this.setImagesToCircle(this.editControls,"line",12)})}getExistNewY(t,e){const s=this.nodes.filter(e=>e.x===t);let n=!1;return s.forEach(s=>{Math.sqrt(Math.pow(s.x-t,2)+Math.pow(s.y-e,2))<100&&(n=!0)}),this.edges.filter(t=>t.id.includes(this.selectElement.id)).map(t=>t.targetNode).find(e=>e.x===t)||n?this.checkExist(t,e):e}checkExist(t,e){const s=this.nodes.filter(e=>e.x===t).map(t=>t.y);s.sort((t,e)=>t-e);const n=s[0],i=s[s.length-1];let c=0;return c=Math.round((n-100)/this.svgScale)>0?Math.round((n-100)/this.svgScale):Math.round((i+100)/this.svgScale),isNaN(c)?e:c}getLimit(t,e,s,n){let i=!1;if(t.forEach(t=>{Math.sqrt(Math.pow(t.x-e,2)+Math.pow(t.y-s,2))<100&&(i=!0)}),!i)return s;n<t.length-1&&(s=t[n+1]),this.getLimit(t,e,s,n+1)}appendNode(t){const e=i.c(this.svgCanvas).select("#nodes").append("g"),s=i.c("#"+t.type).html(),n=i.c("#"+t.type).attr("data-type");e.html(s);const c=Math.round(this.selectElement.x+150/this.svgScale);let a=this.selectElement.y;a=this.getExistNewY(c,a),this.gTransform(e,c,a);const o=this.addNode(n,e,c,a);this.nodes.push(o),this.addDragToG(o),this.getNodePoints(o),this.addListenerToNode(o),this.drawNewLinePointToPoint(this.selectElement.center,o.center),this.gSelected(o)}deleteNode(){"line"!==this.selectElement.type?(this.nodes=this.nodes.filter(t=>t.id!==this.selectElement.id),this.edges.forEach(t=>{t.id.includes(this.selectElement.id)&&t.g.remove()}),this.edges=this.edges.filter(t=>!t.id.includes(this.selectElement.id))):this.edges=this.edges.filter(t=>t.id!==this.selectElement.id),this.selectElement.g.remove(),this.selectElement=null,this.hideEditFlags()}lineNode(){this.hideEditFlags(),this.sourceNode=this.selectElement,this.nodes.forEach(t=>{t.g.classed("node-selected",!1)}),this.drawFlag=!0}getPanelPosition(){if(this.selectElement&&"line"!==this.selectElement.type){const t=document.getElementById("control-panel").offsetWidth,e=this.selectElement.g.node().getBBox();this.editControlsPosition={left:Math.round((this.selectElement.x+e.width)*this.svgScale+t+60),top:this.selectElement.y*this.svgScale+80},this.changeTypePosition.left=this.editControlsPosition.left+80,this.changeTypePosition.top=this.editControlsPosition.top,this.editPosition=this.editControlsPosition}else if(this.selectElement&&"line"===this.selectElement.type){const t=document.getElementById("control-panel").offsetWidth,e=this.selectElement.g.node().getBBox();"linkLine"!==this.selectElement.name?(this.editControlsPosition={left:Math.round((this.selectElement.x+e.width/2)*this.svgScale+t+25),top:Math.round(this.selectElement.y+e.height/2)*this.svgScale+20},this.editPosition.left=this.editControlsPosition.left+50,this.editPosition.top=this.editControlsPosition.top+20):(this.editControlsPosition={left:Math.round((this.selectElement.x+e.width/2)*this.svgScale+t+25),top:Math.round(this.selectElement.y+e.height/2)*this.svgScale+50},this.editPosition=this.editControlsPosition),this.inputPosition.left=this.editControlsPosition.left-20,this.inputPosition.top=this.editControlsPosition.top-20}else this.hideEditFlags()}gTransform(t,e,s){t.attr("transform","translate("+e+","+s+")")}getRandomId(t){return t+"_"+Math.round(1e4*Math.random()).toString(10)}addNode(t,e,s,n){const i=new Le,c=e.select("tspan").text(),a=e.select("tspan:nth-child(2)").text();return i.id=this.getRandomId(c),i.type=t,i.name=c,i.title=this.translate.instant(a),i.x=s,i.y=n,e.attr("id",i.id),i.g=e,i}getNodePoints(t){const e=t.x+7.5,s=t.y+7.5,n=t.g.select("circle").node().getBBox(),i=n.height;t.center.x=e+n.width/2,t.center.y=s+i/2,t.center.parentNode=t}onWheel(t){t.ctrlKey&&(t.preventDefault(),this.svgScale+=t.deltaY>0?-.1:.1,this.svgScale=Number(this.svgScale.toFixed(1)),this.svgScale>3?this.svgScale=3:this.svgScale<.5&&(this.svgScale=.5),this.getPanelPosition(),this.svgSelection.select("g").attr("transform","scale("+this.svgScale+")"))}addTransformToCanvas(){this.canvasListener||(this.canvasListener=!0,this.svgSelection.call(i.a().on("drag",t=>{this.svgSelection.style("cursor","grab"),this.nodes.forEach(e=>{e.x+=Math.round(t.dx/this.svgScale),e.y+=Math.round(t.dy/this.svgScale),this.gTransform(e.g,e.x,e.y),this.getNodePoints(e)}),this.edges.forEach(t=>{this.drawExistLine(t)}),this.getPanelPosition()})),this.svgSelection.call(i.e().on("zoom",t=>{if(t.sourceEvent&&t.sourceEvent.ctrlKey)this.svgSelection.style("cursor","all-scroll"),this.svgScale+=t.sourceEvent.deltaY>0?-.1:.1,this.svgScale=Number(this.svgScale.toFixed(1)),this.svgScale>3?this.svgScale=3:this.svgScale<.5&&(this.svgScale=.5),this.svgSelection.select("g").attr("transform","scale("+this.svgScale+")");else if(t.sourceEvent){this.svgSelection.style("cursor","s-resize");const e=t.sourceEvent.deltaY;this.nodes.forEach(t=>{t.y+=e>0?-Math.round(50/this.svgScale):Math.round(50/this.svgScale),this.gTransform(t.g,t.x,t.y),this.getNodePoints(t)}),this.edges.forEach(t=>{this.drawExistLine(t)})}this.getPanelPosition()})),this.svgSelection.on("mouseenter",t=>{t.preventDefault(),this.drawDashLine(t)}),this.svgSelection.on("mousemove",t=>{t.preventDefault(),this.drawDashLine(t)}),this.svgSelection.on("click",t=>{t.preventDefault(),this.drawFlag&&"path"!==t.target.tagName?(this.svgSelection.style("cursor","default"),i.c(t.target).style("cursor","pointer"),this.drawFlag=!1,this.drawLine.remove(),this.selectElement.g.classed("node-selected",!0),this.showEditControls=!0,setTimeout(()=>{this.setImagesToCircle(this.editControls,"line",12)})):t.target&&"svg"===t.target.tagName&&(this.svgSelection.style("cursor","pointer"),this.nodes.forEach(t=>{t.g.classed("node-selected",!1)}),this.edges.forEach(t=>{t.g.classed("line-selected",!1)}),this.selectElement=null,this.hideEditFlags())}))}drawDashLine(t){if(this.drawFlag){this.svgSelection.style("cursor","not-allowed");const e=i.b();e.moveTo(this.sourceNode.center.x,this.sourceNode.center.y),e.lineTo(t.offsetX>this.sourceNode.center.x?Math.round((t.offsetX-5)/this.svgScale):Math.round((t.offsetX+5)/this.svgScale),Math.round(t.offsetY/this.svgScale));const s=e.toString(),n=this.sourceNode.id+"_"+this.sourceNode.id+"_linkLine";i.c("#"+n).node()?(this.drawLine=i.c("#"+n),this.drawLine.attr("d",s),this.drawLine.style("stroke-dashArray","3,3")):(this.drawLine=i.c(this.svgCanvas).select("#lines").append("path"),this.drawLine.attr("id",n).attr("d",s),this.drawLine.style("stroke-dashArray","3,3"))}else this.svgSelection.style("cursor","default")}addDragToG(t){t.g.call(i.a().on("drag",e=>{t.g.style("cursor","grab"),t.x+=e.dx,t.y+=e.dy,this.gSelected(t),this.gTransform(t.g,t.x,t.y),this.getNodePoints(t),this.edges.forEach(t=>{this.selectElement&&this.selectElement.id===t.id&&(this.selectElement=null,t.g.classed("line-selected",!1)),this.drawExistLine(t)}),this.getPanelPosition()}))}ngOnDestroy(){this.unsubscribeAll.next(),this.unsubscribeAll.complete(),document.fullscreenElement&&document.exitFullscreen()}}return t.\u0275fac=function(e){return new(e||t)(x.Sb(I.a),x.Sb(N.c),x.Sb(Y.c),x.Sb(k.p),x.Sb(C.a),x.Sb(L.h),x.Sb(L.a),x.Sb(k.g),x.Sb(U.d),x.Sb(R.b),x.Sb(k.q),x.Sb(F),x.Sb(X),x.Sb(J.a))},t.\u0275cmp=x.Mb({type:t,selectors:[["app-edit-strategy"]],viewQuery:function(t,e){var s;1&t&&(x.Oc(ft,!0),x.Oc(wt,!0),x.Zc(vt,!0),x.Zc(Et,!0),x.Zc(Gt,!0)),2&t&&(x.Ec(s=x.hc())&&(e.clearCanvas=s.first),x.Ec(s=x.hc())&&(e.canLeave=s.first),x.Ec(s=x.hc())&&(e.textInput=s.first),x.Ec(s=x.hc())&&(e.startTime=s.first),x.Ec(s=x.hc())&&(e.endTime=s.first))},hostBindings:function(t,e){1&t&&x.gc("resize",(function(){return e.onResize()}),!1,x.Ic)("keydown",(function(t){return e.onKeyPress(t)}),!1,x.Ic)},decls:127,vars:107,consts:[[1,"page-layout","carded","fullwidth","inner-scroll"],[1,"top-bg","accent"],[1,"center"],["fxLayout","row","fxLayoutAlign","space-between center",1,"header","accent","py-24","px-8"],["class","m-0",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-around center","fxLayoutGap","8px"],["mat-button","","matRipple","","color","accent","fxLayout","row","fxLayoutAlign","space-between center",1,"bg-white","h-32","dark-box-shadow-hover",3,"disableRipple","matRippleRadius","matRippleColor","click"],[1,"iconfont","iconsave","mr-8"],[1,"iconfont","iconreject","mat-icon-12","mr-8"],["fxLayout","row","fxLayoutAlign","start start",1,"content-card"],["id","control-panel","fusePerfectScrollbar","","fxLayout","column","fxLayoutAlign","start center",1,"h-100-p","p-16"],["fxLayout","column","fxLayoutAlign","start start",1,"w-100-p","pb-16"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100-p"],["mat-icon-button","","matTooltipPosition","above",1,"theme-hover",3,"matTooltip","click"],["fxLayout","row wrap","fxLayoutAlign","start center",1,"w-100-p","mt-8","py-8"],["class","node-div","fxLayout","column","data-type","trigger","fxLayoutAlign","space-around center","draggable","true",3,"id","title","touchmove","touchend","touchstart","dragstart",4,"ngFor","ngForOf"],[1,"w-100-p"],["fxLayout","column","fxLayoutAlign","start start",1,"w-100-p","py-16"],["class","node-div","fxLayout","column","fxLayoutAlign","space-around center","data-type","control","draggable","true",3,"id","title","touchmove","touchend","touchstart","dragstart",4,"ngFor","ngForOf"],["class","node-div","fxLayout","column","fxLayoutAlign","space-around center","data-type","actuator","draggable","true",3,"id","title","touchmove","touchend","touchstart","dragstart",4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","start start","fxFlex","1 1 auto",1,"h-100-p","p-16"],["fxLayout","row","fxLayoutAlign","space-around center",1,"canvas-left-buttons"],["mat-icon-button","","matTooltipPosition","above",1,"dark-box-shadow-hover","theme-hover",3,"matTooltip","click"],["type","file","hidden","","accept",".json",3,"change"],["jsonFile",""],[4,"ngIf"],["class","error-span ml-8",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-around center",1,"canvas-right-buttons",3,"ngStyle.lt-md","ngClass"],["mat-icon-button","","matTooltipPosition","above","class","dark-box-shadow-hover theme-hover",3,"matTooltip","click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","version","1.1","id","canvas",1,"w-100-p","h-100-p",3,"dragover","drop"],["type","text/css"],["id","patterns"],["id","markerCircle","markerWidth","8","markerHeight","8","refX","5","refY","5"],["cx","5","cy","5","r","3",1,"marker-circle"],["id","markerArrow","markerWidth","8","markerHeight","8","refX","30","refY","4","orient","auto"],["d","M0,0 L0,8 L8,4 L0,0",1,"path-fill-theme"],["id","lines"],["id","nodes"],["id","properties-panel","fxLayout","column","fxLayoutAlign","start start",1,"h-100-p","py-16","px-8","normal-form-fields",3,"ngStyle","click"],["autocomplete","off",3,"formGroup"],["appearance","outline",1,"w-100-p"],["matInput","","formControlName","name"],[3,"timeControl","config","requiredMsg","label","sourceDate"],["startTime",""],["endTime",""],["readonly","","matInput","",1,"select-activity",3,"value","focus"],["labelPosition","before","formControlName","enabled",1,"pl-8","mb-24"],["appearance","outline",1,"w-100-p","text-area"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","10","cdkAutosizeMaxRows","10","formControlName","strategyDesc"],["autosize","cdkTextareaAutosize"],["class","float-panel","fxLayout","column","fxLayoutAlign","space-around center","fxLayoutGap","4px",3,"ngStyle","mousewheel",4,"ngIf"],["class","text-input","fxLayout","column","fxLayoutAlign","space-around center",3,"ngStyle",4,"ngIf"],["class","change-type","fxLayout","column","fxLayoutAlign","space-around center",3,"ngStyle",4,"ngIf"],["class","edit-info","fxLayout","row","fxLayoutAlign","start start",3,"ngStyle","mousewheel",4,"ngIf"],["clearCanvas",""],["canLeave",""],["keyboard",""],["passengersTag",""],["couponTemplate",""],["messageTemplate",""],["activities",""],[1,"m-0"],["fxLayout","column","data-type","trigger","fxLayoutAlign","space-around center","draggable","true",1,"node-div",3,"id","title","touchmove","touchend","touchstart","dragstart"],["width","55","height","80","viewBox","0 0 55 80"],["opacity","0","rx","2","x","5","y","5","height","45","width","45",1,"rect-fill-theme"],["r","20","cx","27.5","cy","27.5","stroke","#aaaaaa","fill","#ffffff"],["r","20","cx","27.5","cy","27.5","stroke","#aaaaaa",1,"center"],["x","27.5","y","70","text-anchor","middle"],["display","none"],["class","path-fill-theme","style","font-size: 10px;text-align: center;",4,"ngIf"],["class","path-fill-theme","style","font-size: 8px;text-align: center;",4,"ngIf"],[1,"path-fill-theme",2,"font-size","10px","text-align","center"],[1,"path-fill-theme",2,"font-size","8px","text-align","center"],["fxLayout","column","fxLayoutAlign","space-around center","data-type","control","draggable","true",1,"node-div",3,"id","title","touchmove","touchend","touchstart","dragstart"],["rx","2","opacity","0","x","5","y","5","height","45","width","45",1,"rect-fill-theme"],["r","20","cx","27.5","cy","27.5","stroke","#aaaaaa","fill","#ffffff",1,"center"],["fxLayout","column","fxLayoutAlign","space-around center","data-type","actuator","draggable","true",1,"node-div",3,"id","title","touchmove","touchend","touchstart","dragstart"],["opacity","0","rx","5","x","5","y","5","height","45","width","45",1,"rect-fill-theme"],[1,"error-span","ml-8"],["fxLayout","column","fxLayoutAlign","space-around center","fxLayoutGap","4px",1,"float-panel",3,"ngStyle","mousewheel"],["fxLayout","row wrap","fxLayoutAlign","start center",4,"ngIf"],["class","w-100-p",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","start center"],["fxLayout","row","fxLayoutAlign","space-around center","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["fxLayout","row","matTooltipPosition","above","fxLayoutAlign","space-around center",3,"matTooltip","click",4,"ngIf"],["matTooltipPosition","above","fxLayout","row","fxLayoutAlign","space-around center",3,"matTooltip","click",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-around center","matTooltipPosition","above",3,"matTooltip","click"],[1,"mat-icon-20","theme-hover"],[4,"ngFor","ngForOf"],["matTooltipPosition","above",3,"id","matTooltip","click"],["viewBox","0 0 25 25",2,"cursor","pointer"],["r","12","cx","12.5","cy","12.5","stroke","#aaaaaa","fill","#ffffff"],["fxLayout","row","matTooltipPosition","above","fxLayoutAlign","space-around center",3,"matTooltip","click"],["matTooltipPosition","above","fxLayout","row","fxLayoutAlign","space-around center",3,"matTooltip","click"],["fxLayout","column","fxLayoutAlign","space-around center",1,"text-input",3,"ngStyle"],["color","accent",1,"normal-form-field","w-68"],[1,"font-size-10"],["matInput","",3,"input"],["textInput",""],["fxLayout","column","fxLayoutAlign","space-around center",1,"change-type",3,"ngStyle"],["matTooltipPosition","above",3,"matTooltip","id","click",4,"ngIf"],["matTooltipPosition","above",3,"matTooltip","id","click"],["fxLayout","row","fxLayoutAlign","start start",1,"edit-info",3,"ngStyle","mousewheel"],[1,"triangle-div"],["fxLayout","column","fxLayoutAlign","start center",1,"info-panel"],["fxLayout","row","fxLayoutAlign","space-between center",1,"accent","info-header","h-40","w-100-p","p-8"],["class","ml-8 font-size-12",4,"ngIf"],["mat-icon-button","","fxLayout","row","fxLayoutAlign","space-around center",1,"dark-box-shadow-hover","mat-button-32",3,"click"],[1,"mat-icon-20"],["fxLayout","column","fxLayoutAlign","start center",1,"info-content","p-8","w-100-p",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"expand-panel"],[1,"ml-8","font-size-12"],["fxLayout","column","fxLayoutAlign","start center","fxFlexFill","",1,"p-8","tag-container"],["mat-stroked-button","","color","accent",1,"add-button",3,"click"],["matTooltipPosition","above","class","accent",3,"removable","selectable","matTooltip","removed",4,"ngFor","ngForOf"],["matTooltipPosition","above",1,"accent",3,"removable","selectable","matTooltip","removed"],["matChipRemove",""],["fxLayout","row wrap","fxLayoutAlign","start start","fxFlexFill","",1,"p-8","params-container"],["fxLayout","row","fxLayoutAlign","center center",1,"add-button",3,"click"],[1,"ml-4"],["class","coupon-cell","fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","2px",4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","2px",1,"coupon-cell"],["mat-icon-button","","fxLayout","row","fxLayoutAlign","center center",1,"w-24","h-24","remove-button",3,"click"],["color","warn",1,"mat-icon-20"],["class","add-button","fxLayout","row","fxLayoutAlign","center center",3,"click",4,"ngIf"],["class","common-cell cursor-pointer","fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","2px",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","2px",1,"common-cell","cursor-pointer",3,"click"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100-p"],[3,"content"],[1,"keyboard","w-100-p"],["colspan","2"],[3,"overPanel","functionIndex","checkbox","selectedRows","dataSelect"],[3,"overPanel","functionIndex","singleSelect","selectedRow","dataSelect"]],template:function(t,e){if(1&t){const t=x.Zb();x.Yb(0,"div",0),x.Tb(1,"div",1),x.Yb(2,"div",2),x.Yb(3,"div",3),x.Sc(4,Tt,3,3,"h2",4),x.Sc(5,St,3,3,"h2",4),x.Yb(6,"div",5),x.Yb(7,"button",6),x.gc("click",(function(){return e.save()})),x.Tb(8,"span",7),x.Yb(9,"span"),x.Uc(10),x.lc(11,"translate"),x.Xb(),x.Xb(),x.Yb(12,"button",6),x.gc("click",(function(){return e.cancel()})),x.Tb(13,"span",8),x.Yb(14,"span"),x.Uc(15),x.lc(16,"translate"),x.Xb(),x.Xb(),x.Xb(),x.Xb(),x.Yb(17,"div",9),x.Yb(18,"div",10),x.Yb(19,"div",11),x.Yb(20,"div",12),x.Yb(21,"span"),x.Uc(22),x.lc(23,"translate"),x.Xb(),x.Yb(24,"button",13),x.gc("click",(function(){x.Jc(t);const s=x.Fc(118);return e.showTips(s)})),x.lc(25,"translate"),x.Yb(26,"mat-icon"),x.Uc(27,"help_outline"),x.Xb(),x.Xb(),x.Xb(),x.Yb(28,"div",14),x.Sc(29,xt,15,12,"div",15),x.Xb(),x.Xb(),x.Tb(30,"mat-divider",16),x.Yb(31,"div",17),x.Yb(32,"span"),x.Uc(33),x.lc(34,"translate"),x.Xb(),x.Yb(35,"div",14),x.Sc(36,Yt,15,12,"div",18),x.Xb(),x.Xb(),x.Tb(37,"mat-divider",16),x.Yb(38,"div",17),x.Yb(39,"span"),x.Uc(40),x.lc(41,"translate"),x.Xb(),x.Yb(42,"div",14),x.Sc(43,Ut,15,12,"div",19),x.Xb(),x.Xb(),x.Xb(),x.Yb(44,"div",20),x.Yb(45,"div",21),x.Yb(46,"button",22),x.gc("click",(function(){return x.Jc(t),x.Fc(51).click()})),x.lc(47,"translate"),x.Yb(48,"mat-icon"),x.Uc(49,"folder_open"),x.Xb(),x.Xb(),x.Yb(50,"input",23,24),x.gc("change",(function(t){return e.loadFromJson(t)})),x.Xb(),x.Sc(52,Rt,9,6,"ng-container",25),x.Sc(53,Zt,2,2,"span",26),x.Xb(),x.Yb(54,"div",27),x.Yb(55,"button",22),x.gc("click",(function(){return e.setFullScreen()})),x.lc(56,"translate"),x.Sc(57,Dt,2,0,"mat-icon",25),x.Sc(58,Ft,2,0,"mat-icon",25),x.Xb(),x.Sc(59,Xt,4,3,"button",28),x.Sc(60,Jt,5,3,"ng-container",25),x.Yb(61,"button",22),x.gc("click",(function(){return e.propertyOpenOrFold()})),x.lc(62,"translate"),x.Yb(63,"mat-icon"),x.Uc(64,"menu"),x.Xb(),x.Xb(),x.Xb(),x.jc(),x.Yb(65,"svg",29),x.gc("dragover",(function(t){return e.onDragOver(t)}))("drop",(function(t){return e.onControlDrop(t)})),x.Yb(66,"style",30),x.Uc(67," rect { fill: transparent } path { stroke: black } "),x.Xb(),x.Tb(68,"defs",31),x.Yb(69,"defs"),x.Yb(70,"marker",32),x.Tb(71,"circle",33),x.Xb(),x.Yb(72,"marker",34),x.Tb(73,"path",35),x.Xb(),x.Xb(),x.Yb(74,"g"),x.Tb(75,"g",36),x.Tb(76,"g",37),x.Xb(),x.Xb(),x.Xb(),x.ic(),x.Yb(77,"div",38),x.gc("click",(function(){return e.onPanelClick()})),x.Yb(78,"form",39),x.Yb(79,"mat-form-field",40),x.Yb(80,"mat-label"),x.Uc(81),x.lc(82,"translate"),x.Xb(),x.Tb(83,"input",41),x.Sc(84,jt,4,6,"mat-error",25),x.Xb(),x.Yb(85,"lib-ng-material-flatpickr",42,43),x.gc("sourceDate",(function(s){x.Jc(t);const n=x.Fc(91);return e.onStartSourceDate(s,n)})),x.lc(87,"translate"),x.lc(88,"translate"),x.lc(89,"translate"),x.Xb(),x.Yb(90,"lib-ng-material-flatpickr",42,44),x.gc("sourceDate",(function(s){x.Jc(t);const n=x.Fc(86);return e.onEndSourceDate(s,n)})),x.lc(92,"translate"),x.lc(93,"translate"),x.lc(94,"translate"),x.Xb(),x.Yb(95,"mat-form-field",40),x.Yb(96,"mat-label"),x.Uc(97),x.lc(98,"translate"),x.Xb(),x.Yb(99,"input",45),x.gc("focus",(function(){x.Jc(t);const s=x.Fc(126);return e.openActivity(s)})),x.Xb(),x.Xb(),x.Yb(100,"mat-slide-toggle",46),x.Uc(101),x.lc(102,"translate"),x.Xb(),x.Yb(103,"mat-form-field",47),x.Yb(104,"mat-label"),x.Uc(105),x.lc(106,"translate"),x.Xb(),x.Tb(107,"textarea",48,49),x.Xb(),x.Xb(),x.Xb(),x.Sc(109,Ht,11,13,"div",50),x.Sc(110,Kt,7,8,"div",51),x.Sc(111,$t,3,6,"div",52),x.Sc(112,he,16,12,"div",53),x.Xb(),x.Xb(),x.Xb(),x.Sc(113,ue,2,3,"ng-template",null,54,x.Tc),x.Sc(115,pe,2,3,"ng-template",null,55,x.Tc),x.Sc(117,be,6,4,"ng-template",null,56,x.Tc),x.Sc(119,Ae,1,4,"ng-template",null,57,x.Tc),x.Sc(121,ye,1,4,"ng-template",null,58,x.Tc),x.Sc(123,fe,1,4,"ng-template",null,59,x.Tc),x.Sc(125,we,1,4,"ng-template",null,60,x.Tc)}2&t&&(x.Gb(4),x.sc("ngIf",e.isReload),x.Gb(1),x.sc("ngIf",!e.isReload),x.Gb(2),x.sc("disableRipple",!0)("matRippleRadius",15)("matRippleColor","#000000"),x.Gb(3),x.Vc(x.mc(11,52,"strategy.save")),x.Gb(2),x.sc("disableRipple",!0)("matRippleRadius",15)("matRippleColor","#000000"),x.Gb(3),x.Vc(x.mc(16,54,"strategy.cancel")),x.Gb(3),x.sc("@animate",x.vc(91,ne,x.uc(90,ve))),x.Gb(4),x.Vc(x.mc(23,56,"strategy.trigger")),x.Gb(2),x.sc("matTooltip",x.mc(25,58,"strategy.shortCuts")),x.Gb(5),x.sc("ngForOf",e.triggers),x.Gb(4),x.Vc(x.mc(34,60,"strategy.control")),x.Gb(3),x.sc("ngForOf",e.controls),x.Gb(4),x.Vc(x.mc(41,62,"strategy.actuator")),x.Gb(3),x.sc("ngForOf",e.actuators),x.Gb(2),x.sc("@animate",x.vc(94,ne,x.uc(93,Ee))),x.Gb(1),x.sc("matTooltip",x.mc(47,64,"strategy.loadJson")),x.Gb(6),x.sc("ngIf",e.nodes.length>0),x.Gb(1),x.sc("ngIf",e.errorMsg),x.Gb(1),x.sc("@animate",x.vc(97,ne,x.uc(96,Ge)))("ngStyle.lt-md",x.uc(99,Te))("ngClass",x.vc(100,Se,e.propertyOpenFold)),x.Gb(1),x.sc("matTooltip",x.mc(56,66,"strategy.fullscreen")),x.Gb(2),x.sc("ngIf",!e.isFullScreen),x.Gb(1),x.sc("ngIf",e.isFullScreen),x.Gb(1),x.sc("ngIf",e.isReload),x.Gb(1),x.sc("ngIf",e.nodes.length>0),x.Gb(1),x.sc("matTooltip",x.mc(62,68,"strategy.fold")),x.Gb(4),x.sc("@animate",x.vc(103,ne,x.uc(102,Me))),x.Gb(12),x.sc("ngStyle",x.vc(105,ke,e.propertyOpenFold?"translateX(100%)":"translateX(0px)")),x.Gb(1),x.sc("formGroup",e.strategy),x.Gb(3),x.Vc(x.mc(82,70,"strategy.name")),x.Gb(3),x.sc("ngIf",e.strategy.get("name").invalid),x.Gb(1),x.sc("timeControl",e.strategy.get("beginDate"))("config",e.config)("requiredMsg",x.mc(87,72,"strategy.startTime")+x.mc(88,74,"form.required"))("label",x.mc(89,76,"strategy.startTime")),x.Gb(5),x.sc("timeControl",e.strategy.get("endDate"))("config",e.config)("requiredMsg",x.mc(92,78,"strategy.endTime")+x.mc(93,80,"form.required"))("label",x.mc(94,82,"strategy.endTime")),x.Gb(7),x.Vc(x.mc(98,84,"strategy.selectActivity")),x.Gb(2),x.sc("value",e.currentActivity?e.currentActivity.name:""),x.Gb(2),x.Wc(" ",x.mc(102,86,"strategy.enabled")," "),x.Gb(4),x.Vc(x.mc(106,88,"strategy.strategyDesc")),x.Gb(4),x.sc("ngIf",e.selectElement&&e.showEditControls),x.Gb(1),x.sc("ngIf",e.selectElement&&e.showInput),x.Gb(1),x.sc("ngIf",e.selectElement&&e.showChangeType),x.Gb(1),x.sc("ngIf",e.selectElement&&e.showEditPanel))},directives:[k.c,j.d,j.c,Q.n,j.e,B.b,V.q,k.e,P.a,O.a,Q.m,W.a,j.a,z.c,Q.l,z.a,Q.o,p.v,p.p,p.i,H.c,H.f,K.b,p.c,p.o,p.g,lt,gt.a,ht.b,H.b,Q.p,Q.q,j.f,ut.b,ut.a,ut.c,pt.a,mt.a,bt.a,At.a,yt.a],pipes:[U.c],styles:[".content-card[_ngcontent-%COMP%], .content-card[_ngcontent-%COMP%]   .node-div[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.content-card[_ngcontent-%COMP%]   .node-div[_ngcontent-%COMP%]{cursor:pointer;margin:0 6px}.content-card[_ngcontent-%COMP%]   .node-div[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{border:1px solid transparent}.content-card[_ngcontent-%COMP%]   .node-div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:50px;height:50px;padding:2.5px}.content-card[_ngcontent-%COMP%]   .node-div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:10px!important}.content-card[_ngcontent-%COMP%]   #control-panel[_ngcontent-%COMP%]{overflow:auto}.content-card[_ngcontent-%COMP%]   #control-panel[_ngcontent-%COMP%]   .node-div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px}.content-card[_ngcontent-%COMP%]   .canvas-left-buttons[_ngcontent-%COMP%]{position:absolute;left:278px;transition:left .3s ease-in-out 0s;top:64px}.content-card[_ngcontent-%COMP%]   .canvas-left-buttons[_ngcontent-%COMP%]   .error-span[_ngcontent-%COMP%]{border-left:1px solid rgba(0,0,0,.12);padding:0 8px;max-width:350px;overflow:auto;font-weight:600;color:#f44336}.content-card[_ngcontent-%COMP%]   .canvas-right-buttons[_ngcontent-%COMP%]{position:absolute;right:278px;transition:right .3s ease-in-out 0s;top:64px}.content-card[_ngcontent-%COMP%]   .canvas-right[_ngcontent-%COMP%]{right:24px}.content-card[_ngcontent-%COMP%]   .select-activity[_ngcontent-%COMP%]{cursor:pointer}"],data:{animation:k.t}}),t})();class Ie{}class Ne{constructor(){this.params={}}}class Ye{}class Ce{}class Le{constructor(){this.params={},this.center=new Ue}}class Ue{}let Re=(()=>{class t{canDeactivate(t,e,s,n){if(t&&t.nodes.length>0&&!t.finished&&!t.isReload){const e=t.dialog.open(t.canLeave,{id:"canLeave"}).afterClosed();return e.subscribe(t=>{}),e}return!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=x.Ob({token:t,factory:t.\u0275fac}),t})();var Ze=s("d3UM"),De=s("GpJN"),Fe=s("dAsI"),Xe=s("o+yB"),Je=s("4ly5"),je=s("iFSc");let Qe=(()=>{class t{}return t.\u0275mod=x.Qb({type:t}),t.\u0275inj=x.Pb({factory:function(e){return new(e||t)},providers:[Re],imports:[[n.a,H.e,K.c,V.r,Ze.b,ut.d,k.j,gt.b,ht.c,dt,L.l.forChild([{path:"",component:xe}]),De.a,Fe.a,Xe.a,Je.a,je.a.forChild(J.a,["searchTags","searchCoupons","searchMessages","searchActivities"])]]}),t})()}}]);